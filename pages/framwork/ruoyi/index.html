<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>RuoYi | Southern Fish</title><meta name="keywords" content="RuoYi"><meta name="author" content="Southern Fish"><meta name="copyright" content="Southern Fish"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="若依框架（RuoYi）是一套基于Java开发的快速开发框架，它提供了许多常用的功能模块和工具，包括用户管理、部门管理、角色管理、菜单管理、字典管理、系统监控、定时任务等。若依框架采用了MVC（Model-View-Controller）的架构模式，使用了Spring Boot、MyBatis等流行的开源框架，可以帮助开发者快速搭建企业级的后台管理系统。若依框架还提供了许多可视化的操作界面，使得开发">
<meta property="og:type" content="article">
<meta property="og:title" content="RuoYi">
<meta property="og:url" content="https://southernfish.github.io/pages/framwork/ruoyi/index.html">
<meta property="og:site_name" content="Southern Fish">
<meta property="og:description" content="若依框架（RuoYi）是一套基于Java开发的快速开发框架，它提供了许多常用的功能模块和工具，包括用户管理、部门管理、角色管理、菜单管理、字典管理、系统监控、定时任务等。若依框架采用了MVC（Model-View-Controller）的架构模式，使用了Spring Boot、MyBatis等流行的开源框架，可以帮助开发者快速搭建企业级的后台管理系统。若依框架还提供了许多可视化的操作界面，使得开发">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://southernfish.github.io/img/article/article2.png">
<meta property="article:published_time" content="2025-07-31T05:20:36.000Z">
<meta property="article:modified_time" content="2025-09-17T07:51:48.703Z">
<meta property="article:author" content="Southern Fish">
<meta property="article:tag" content="RuoYi">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://southernfish.github.io/img/article/article2.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://southernfish.github.io/pages/framwork/ruoyi/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'RuoYi',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-09-17 15:51:48'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Southern Fish" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">87</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/article/article2.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Southern Fish</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">RuoYi</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-31T05:20:36.000Z" title="发表于 2025-07-31 13:20:36">2025-07-31</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-09-17T07:51:48.703Z" title="更新于 2025-09-17 15:51:48">2025-09-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Framwork/">Framwork</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">6.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>26分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="RuoYi"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>若依框架（RuoYi）是一套基于Java开发的快速开发框架，它提供了许多常用的功能模块和工具，包括用户管理、部门管理、角色管理、菜单管理、字典管理、系统监控、定时任务等。若依框架采用了MVC（Model-View-Controller）的架构模式，使用了Spring Boot、MyBatis等流行的开源框架，可以帮助开发者快速搭建企业级的后台管理系统。若依框架还提供了许多可视化的操作界面，使得开发者可以方便地进行系统配置和管理。</p>
<blockquote>
<p>官网地址：<a target="_blank" rel="noopener" href="https://doc.ruoyi.vip/">若依框架</a></p>
<p>参考文章：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_20143059/article/details/131337812">ruoyi架构那点事</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/2302_76927249/article/details/149039117">若依框架（前后端分离版）</a></p>
</blockquote>
<h1 id="若依介绍"><a href="#若依介绍" class="headerlink" title="若依介绍"></a>若依介绍</h1><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>若依（<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=RuoYi&spm=1001.2101.3001.7020">RuoYi</a>）是一款基于Spring Boot和MyBatis的Java快速开发框架，主要用于企业级应用系统的开发。它提供了一套完整的后台管理系统解决方案，包括用户权限管理、菜单配置、数据监控等功能，同时支持代码生成器，显著提升开发效率。</p>
<h2 id="核心特点"><a href="#核心特点" class="headerlink" title="核心特点"></a>核心特点</h2><ul>
<li><strong>模块化设计</strong>：前后端分离架构，前端可选Vue2/Vue3版本，后端基于Spring Boot。</li>
<li><strong>代码生成器</strong>：通过可视化配置自动生成CRUD代码，减少重复劳动。</li>
<li><strong>权限控制</strong>：基于RBAC（角色基于访问控制）模型，精细化管理菜单、按钮权限。</li>
<li><strong>多数据源支持</strong>：轻松配置动态数据源，适应复杂业务场景。</li>
</ul>
<h2 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h2><ul>
<li><strong>后端</strong>：Spring Boot、MyBatis、Shiro（安全框架）、Redis（缓存）。</li>
<li><strong>前端</strong>：Vue.js、Element UI（Vue2版本）或Ant Design Vue（Vue3版本）。</li>
<li><strong>数据库</strong>：支持MySQL、Oracle、SQL Server等主流数据库</li>
</ul>
<h2 id="环境要求"><a href="#环境要求" class="headerlink" title="环境要求"></a>环境要求</h2><p>JDK8 以上，mysql，Redis（<a target="_blank" rel="noopener" href="https://www.redis.net.cn/tutorial/3504.html">Redis 配置_redis教程</a>），Maven，Vue</p>
<h2 id="提供的功能"><a href="#提供的功能" class="headerlink" title="提供的功能"></a>提供的功能</h2><h3 id="系统管理"><a href="#系统管理" class="headerlink" title="系统管理"></a>系统管理</h3><p>用户管理：用户是系统操作者，该功能主要完成系统用户配置。<br>部门管理：配置系统组织机构（公司、部门、小组），树结构展现支持数据权限。<br>岗位管理：配置系统用户所属担任职务。<br>菜单管理：配置系统菜单，操作权限，按钮权限标识等。<br>角色管理：角色菜单权限分配、设置角色按机构进行数据范围权限划分。<br>字典管理：对系统中经常使用的一些较为固定的数据进行维护。<br>参数管理：对系统动态配置常用参数。<br>通知公告：系统通知公告信息发布维护。</p>
<h3 id="日志管理"><a href="#日志管理" class="headerlink" title="日志管理"></a>日志管理</h3><p>操作日志：系统正常操作日志记录和查询；系统异常信息日志记录和查询。<br>登录日志：系统登录日志记录查询包含登录异常。</p>
<h3 id="系统监控"><a href="#系统监控" class="headerlink" title="系统监控"></a>系统监控</h3><p>在线用户：当前系统中活跃用户状态监控。<br>服务监控：监视当前系统CPU、内存、磁盘、堆栈等相关信息。<br>缓存监控：对系统的缓存查询，查看、清理等操作。<br>在线构建器：拖动表单元素生成相应的HTML代码。<br>连接池监视：监视当期系统数据库连接池状态，可进行分析SQL找出系统性能瓶颈。</p>
<h3 id="系统工具"><a href="#系统工具" class="headerlink" title="系统工具"></a>系统工具</h3><p>定时任务：在线（添加、修改、删除)任务调度包含执行结果日志。<br>代码生成：前后端代码的生成（java、html、xml、sql)支持CRUD下载 。<br>系统接口：根据业务代码自动生成相关的api接口文档。</p>
<hr>
<h1 id="Redis简介"><a href="#Redis简介" class="headerlink" title="Redis简介"></a>Redis简介</h1><p>Redis（Remote Dictionary Server）是一个开源的高性能键值存储系统，支持多种数据结构（如字符串、哈希、列表、集合等）。它以内存存储为主，兼具持久化功能，常用于缓存、消息队列、实时数据分析等场景。</p>
<h2 id="核心特点-1"><a href="#核心特点-1" class="headerlink" title="核心特点"></a>核心特点</h2><p><strong>内存存储</strong>：数据主要存储在内存中，读写速度极快（可达10万次/秒以上）。</p>
<p><strong>持久化支持</strong>：提供RDB（快照）和AOF（日志）两种方式将数据保存到磁盘。</p>
<p><strong>数据结构丰富</strong>：支持字符串、哈希、列表、集合、有序集合等，适应不同业务需求。</p>
<p><strong>高可用性</strong>：通过哨兵（Sentinel）和集群（Cluster）模式实现故障自动转移与横向扩展。</p>
<h2 id="典型应用场景"><a href="#典型应用场景" class="headerlink" title="典型应用场景"></a>典型应用场景</h2><ul>
<li><strong>缓存加速</strong>：减轻数据库压力，提升网站响应速度。</li>
<li><strong>会话存储</strong>：分布式系统中共享用户会话信息。</li>
<li><strong>实时排行榜</strong>：利用有序集合实现分数排序。</li>
<li><strong>消息队列</strong>：通过列表或Stream结构实现异步任务处理。</li>
</ul>
<h2 id="与其他数据库对比"><a href="#与其他数据库对比" class="headerlink" title="与其他数据库对比"></a>与其他数据库对比</h2><ul>
<li><strong>Redis vs MySQL</strong>：Redis基于内存，适合高速读写；MySQL基于磁盘，适合复杂查询与事务。</li>
<li><strong>Redis vs Memcached</strong>：Redis支持数据持久化和更多数据结构，Memcached仅支持简单键值且无持久化。</li>
</ul>
<p>Redis的灵活性和高性能使其成为现代分布式系统中的重要组件。</p>
<h1 id="Nginx介绍"><a href="#Nginx介绍" class="headerlink" title="Nginx介绍"></a>Nginx介绍</h1><p>Nginx（发音为“engine-x”）是一款高性能的开源Web服务器、反向代理服务器、负载均衡器及HTTP缓存工具。最初由俄罗斯开发者Igor Sysoev设计，于2004年首次公开发布，现已成为全球最流行的Web服务器之一。</p>
<h2 id="Nginx的核心功能"><a href="#Nginx的核心功能" class="headerlink" title="Nginx的核心功能"></a>Nginx的核心功能</h2><p><strong>Web服务器</strong>：Nginx可以高效地处理静态内容（如HTML、CSS、图片），支持高并发连接，资源占用低，适合高流量场景。</p>
<p><strong>反向代理</strong>：作为反向代理服务器，Nginx可将客户端请求转发至后端多台服务器，隐藏真实服务器信息，提升安全性和可扩展性。</p>
<p><strong>负载均衡</strong>：支持多种负载均衡算法（如轮询、加权轮询、IP哈希），将流量分配到多台后端服务器，提高系统可用性和性能。</p>
<p><strong>HTTP缓存</strong>：通过缓存静态或动态内容，减少后端服务器压力，加速响应速度。</p>
<h2 id="Nginx的特点"><a href="#Nginx的特点" class="headerlink" title="Nginx的特点"></a>Nginx的特点</h2><ul>
<li><p><strong>事件驱动架构</strong>：基于异步非阻塞模型，支持高并发连接（单机可处理数万并发请求）。</p>
</li>
<li><p><strong>模块化设计</strong>：通过模块扩展功能（如支持SSL、gzip压缩、HTTP/2）。</p>
</li>
<li><p><strong>低资源消耗</strong>：内存和CPU占用率远低于传统服务器（如Apache）。</p>
</li>
<li><p><strong>跨平台</strong>：支持Linux、Windows、macOS等操作系统。</p>
</li>
</ul>
<h2 id="登录验证码流程"><a href="#登录验证码流程" class="headerlink" title="登录验证码流程"></a>登录验证码流程</h2><p>首先通过后端生成一个表达式上传到前端，并且将验证码答案存放在Redis中，用户通过前端登录时将key值和输入答案一起传入数据库。</p>
<p>登录操作将内容保存在表中 <code>sys_logininfor</code></p>
<h2 id="进行增删该查操作"><a href="#进行增删该查操作" class="headerlink" title="进行增删该查操作"></a>进行增删该查操作</h2><p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/server/image-20250801170733602.png" alt="image-20250801170733602"></p>
<p>单应用在<code>resources</code>目录下的<code>application.yml</code>，多模块<code>ruoyi-generator</code>中的<code>resources</code>目录下的<code>generator.yml</code>，可以自己根据实际情况调整默认配置。</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 代码生成</span></span><br><span class="line">gen: </span><br><span class="line">  <span class="meta"># 开发者姓名，生成到类注释上</span></span><br><span class="line">  author: ruoyi</span><br><span class="line">  <span class="meta"># 默认生成包路径 system 需改成自己的模块名称 如 system monitor tool</span></span><br><span class="line">  packageName: com.ruoyi.system</span><br><span class="line">  <span class="meta"># 自动去除表前缀，默认是false</span></span><br><span class="line">  autoRemovePre: <span class="literal">false</span></span><br><span class="line">  <span class="meta"># 表前缀（生成类名不会包含表前缀，多个用逗号分隔）</span></span><br><span class="line">  tablePrefix: sys_</span><br></pre></td></tr></table></figure>

<h3 id="代码生成使用"><a href="#代码生成使用" class="headerlink" title="代码生成使用"></a>代码生成使用</h3><p>1、登录系统（系统工具 -&gt; 代码生成 -&gt; 导入对应表）</p>
<p>2、代码生成列表中找到需要表（可预览、编辑、同步、删除生成配置）</p>
<p>3、点击生成代码会得到一个<code>ruoyi.zip</code>执行<code>sql</code>文件，按照包内目录结构复制到自己的项目中即可</p>
<p>代码生成支持编辑、预览、同步</p>
<p>预览：对生成的代码提前预览，防止出现一些不符合预期的情况。</p>
<p>同步：对原表的字段进行同步，包括新增、删除、修改的字段处理。</p>
<p>修改：对生成的代码基本信息、字段信息、生成信息做一系列的调整。</p>
<p>另外多模块所有代码生成的相关业务逻辑代码在<code>ruoyi-generator</code>模块，不需要可以自行删除模块。</p>
<h3 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h3><h4 id="后端部署"><a href="#后端部署" class="headerlink" title="后端部署"></a>后端部署</h4><p>打包工程文件：在工程文件下打开执行bin/package.bat文件进行打包，生成war/jar文件</p>
<h4 id="前端部署"><a href="#前端部署" class="headerlink" title="前端部署"></a>前端部署</h4><p>当项目开发完毕，只需要运行一行命令就可以打包应用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打包正式环境</span></span><br><span class="line">npm run build:prod</span><br><span class="line"><span class="comment"># 打包预发布环境</span></span><br><span class="line">npm run build:stage</span><br></pre></td></tr></table></figure>

<p>构建打包成功之后，会在根目录生成 dist 文件夹，里面就是构建打包好的文件，通常是 <em><strong>.js 、</strong></em>.css、index.html 等静态文件。</p>
<p>通常情况下 dist 文件夹的静态文件发布到你的 nginx 或者静态服务器即可，其中的 index.html 是后台服务的入口页面。</p>
<h1 id="快速搭建若依"><a href="#快速搭建若依" class="headerlink" title="快速搭建若依"></a>快速搭建若依</h1><h2 id="前端搭建"><a href="#前端搭建" class="headerlink" title="前端搭建"></a>前端搭建</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h2 id="后端搭建"><a href="#后端搭建" class="headerlink" title="后端搭建"></a>后端搭建</h2><p>修改数据库和redis的配置。</p>
<h2 id="代码介绍"><a href="#代码介绍" class="headerlink" title="代码介绍"></a>代码介绍</h2><p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/server/image-20250801163351287.png" alt="image-20250801163351287"></p>
<h3 id="ruoyi-quartz"><a href="#ruoyi-quartz" class="headerlink" title="ruoyi-quartz"></a>ruoyi-quartz</h3><p>使用quartz作为定时任务管理，这里不多说，老生常谈的问题。如果想了解可以参考文章：<a target="_blank" rel="noopener" href="https://baocl.blog.csdn.net/article/details/106075216">quartz实现定时任务</a></p>
<h3 id="ruoyi-generator"><a href="#ruoyi-generator" class="headerlink" title="ruoyi-generator"></a>ruoyi-generator</h3><p>该包为代码生成器，主要的流程如下。</p>
<p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/server/image-20250801163413997.png" alt="image-20250801163413997"></p>
<p><strong>GenTableServiceImpl/generatorCode代码生成</strong></p>
<p>核心代码为该类的方法。主要使用<strong>org.apache.velocity.app</strong>的API。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">generatorCode</span><span class="params">(String tableName)</span>&#123;</span><br><span class="line">    <span class="comment">// 查询表信息</span></span><br><span class="line">    <span class="type">GenTable</span> <span class="variable">table</span> <span class="operator">=</span> genTableMapper.selectGenTableByName(tableName);</span><br><span class="line">    <span class="comment">// 设置主子表信息</span></span><br><span class="line">    setSubTable(table);</span><br><span class="line">    <span class="comment">// 设置主键列信息</span></span><br><span class="line">    setPkColumn(table);</span><br><span class="line">    VelocityInitializer.initVelocity();</span><br><span class="line">    <span class="type">VelocityContext</span> <span class="variable">context</span> <span class="operator">=</span> VelocityUtils.prepareContext(table);</span><br><span class="line">    <span class="comment">// 获取模板列表</span></span><br><span class="line">    List&lt;String&gt; templates = VelocityUtils.getTemplateList(table.getTplCategory());</span><br><span class="line">    <span class="keyword">for</span> (String template : templates) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.containsAny(template, <span class="string">&quot;sql.vm&quot;</span>, <span class="string">&quot;api.js.vm&quot;</span>, <span class="string">&quot;index.vue.vm&quot;</span>, <span class="string">&quot;index-tree.vue.vm&quot;</span>))&#123;</span><br><span class="line">            <span class="comment">// 渲染模板</span></span><br><span class="line">            <span class="type">StringWriter</span> <span class="variable">sw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringWriter</span>();</span><br><span class="line">            <span class="type">Template</span> <span class="variable">tpl</span> <span class="operator">=</span> Velocity.getTemplate(template, Constants.UTF8);</span><br><span class="line">            tpl.merge(context, sw);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> getGenPath(table, template);</span><br><span class="line">                FileUtils.writeStringToFile(<span class="keyword">new</span> <span class="title class_">File</span>(path), sw.toString(), CharsetKit.UTF_8);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="string">&quot;渲染模板失败，表名：&quot;</span> + table.getTableName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ruoyi-system"><a href="#ruoyi-system" class="headerlink" title="ruoyi-system"></a>ruoyi-system</h3><p>标准的增删改查方法。没有什么多说的。但是ruoyi项目将controller与service部分隔离开来。</p>
<h3 id="ruoyi-common"><a href="#ruoyi-common" class="headerlink" title="ruoyi-common"></a>ruoyi-common</h3><p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/server/image-20250801163603079.png" alt="image-20250801163603079"></p>
<h4 id="annotation"><a href="#annotation" class="headerlink" title="annotation"></a>annotation</h4><p>自定义注解，注解的功能在下方。</p>
<p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/server/image-20250801163631130.png" alt="image-20250801163631130"></p>
<h4 id="config"><a href="#config" class="headerlink" title="config"></a>config</h4><p>获取application.yml中的配置信息，并注入项目bean中。</p>
<p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/server/image-20250801163728304.png" alt="image-20250801163728304"></p>
<h4 id="constant"><a href="#constant" class="headerlink" title="constant"></a>constant</h4><p>为项目提供常量池。</p>
<h4 id="core"><a href="#core" class="headerlink" title="core"></a>core</h4><p><strong>1.controller</strong>：所有接口层的基类，提供了分页，排序等方法，其他接口类直接继承即可。架构的常用做法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseController</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(<span class="built_in">this</span>.getClass());</span><br><span class="line">    <span class="comment">// 将前台传递过来的日期格式的字符串，自动转化为Date类型</span></span><br><span class="line">    <span class="meta">@InitBinder</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initBinder</span><span class="params">(WebDataBinder binder)</span>&#123;</span><br><span class="line">        <span class="comment">// Date 类型转换</span></span><br><span class="line">        binder.registerCustomEditor(Date.class, <span class="keyword">new</span> <span class="title class_">PropertyEditorSupport</span>()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAsText</span><span class="params">(String text)</span>&#123;</span><br><span class="line">                setValue(DateUtils.parseDate(text));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 设置请求分页数据</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">startPage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">PageDomain</span> <span class="variable">pageDomain</span> <span class="operator">=</span> TableSupport.buildPageRequest();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">pageNum</span> <span class="operator">=</span> pageDomain.getPageNum();</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">pageSize</span> <span class="operator">=</span> pageDomain.getPageSize();</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotNull(pageNum) &amp;&amp; StringUtils.isNotNull(pageSize)) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">orderBy</span> <span class="operator">=</span> SqlUtil.escapeOrderBySql(pageDomain.getOrderBy());</span><br><span class="line">            <span class="type">Boolean</span> <span class="variable">reasonable</span> <span class="operator">=</span> pageDomain.getReasonable();</span><br><span class="line">            PageHelper.startPage(pageNum, pageSize, orderBy).setReasonable(reasonable);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 设置请求排序数据</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">startOrderBy</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">PageDomain</span> <span class="variable">pageDomain</span> <span class="operator">=</span> TableSupport.buildPageRequest();</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotEmpty(pageDomain.getOrderBy())) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">orderBy</span> <span class="operator">=</span> SqlUtil.escapeOrderBySql(pageDomain.getOrderBy());</span><br><span class="line">            PageHelper.orderBy(orderBy);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 响应请求分页数据</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&#123; &quot;rawtypes&quot;, &quot;unchecked&quot; &#125;)</span></span><br><span class="line">    <span class="keyword">protected</span> TableDataInfo <span class="title function_">getDataTable</span><span class="params">(List&lt;?&gt; list)</span> &#123;</span><br><span class="line">        <span class="type">TableDataInfo</span> <span class="variable">rspData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TableDataInfo</span>();</span><br><span class="line">        rspData.setCode(HttpStatus.SUCCESS);</span><br><span class="line">        rspData.setMsg(<span class="string">&quot;查询成功&quot;</span>);</span><br><span class="line">        rspData.setRows(list);</span><br><span class="line">        rspData.setTotal(<span class="keyword">new</span> <span class="title class_">PageInfo</span>(list).getTotal());</span><br><span class="line">        <span class="keyword">return</span> rspData;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>domain</strong>：权限等架构查询使用的实体类集合，其中<code>BaseEntity、AjaxResult</code>为架构设计经常使用的。BaseEntity需要其他实体类继承，提供了页码、总数等通用字段。AjaxResult是统一返回的实体类，能与前台约定固定的返回格式。<code>&#123;code: message: data&#125;</code>格式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AjaxResult</span> <span class="keyword">extends</span> <span class="title class_">HashMap</span>&lt;String, Object&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    <span class="comment">/** 状态码 */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CODE_TAG</span> <span class="operator">=</span> <span class="string">&quot;code&quot;</span>;</span><br><span class="line">    <span class="comment">/** 返回内容 */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MSG_TAG</span> <span class="operator">=</span> <span class="string">&quot;msg&quot;</span>;</span><br><span class="line">    <span class="comment">/** 数据对象 */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DATA_TAG</span> <span class="operator">=</span> <span class="string">&quot;data&quot;</span>;</span><br><span class="line">    <span class="comment">// 初始化一个新创建的 AjaxResult 对象，使其表示一个空消息。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AjaxResult</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="comment">// 初始化一个新创建的 AjaxResult 对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AjaxResult</span><span class="params">(<span class="type">int</span> code, String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.put(CODE_TAG, code);</span><br><span class="line">        <span class="built_in">super</span>.put(MSG_TAG, msg);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 初始化一个新创建的 AjaxResult 对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AjaxResult</span><span class="params">(<span class="type">int</span> code, String msg, Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.put(CODE_TAG, code);</span><br><span class="line">        <span class="built_in">super</span>.put(MSG_TAG, msg);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotNull(data)) &#123;</span><br><span class="line">            <span class="built_in">super</span>.put(DATA_TAG, data);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BaseEntity</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    <span class="comment">/** 搜索值 */</span></span><br><span class="line">    <span class="keyword">private</span> String searchValue;</span><br><span class="line">    <span class="comment">/** 创建者 */</span></span><br><span class="line">    <span class="keyword">private</span> String createBy;</span><br><span class="line">    <span class="comment">/** 创建时间 */</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="comment">/** 更新者 */</span></span><br><span class="line">    <span class="keyword">private</span> String updateBy;</span><br><span class="line">    <span class="comment">/** 更新时间 */</span></span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date updateTime;</span><br><span class="line">    <span class="comment">/** 备注 */</span></span><br><span class="line">    <span class="keyword">private</span> String remark;</span><br><span class="line">    <span class="comment">/** 请求参数 */</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; params;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="exception"><a href="#exception" class="headerlink" title="exception"></a>exception</h4><p>封装了一系列的异常，在特定时期使用即可。</p>
<p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/server/image-20250801164106581.png" alt="image-20250801164106581"></p>
<h4 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h4><p>过滤器，通用写法，如果有使用直接复制即可。</p>
<p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/server/image-20250801164146902.png" alt="image-20250801164146902"></p>
<h4 id="utils"><a href="#utils" class="headerlink" title="utils"></a>utils</h4><p>提供了一大波工具类。如果需要可以直接复制使用。</p>
<p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/server/image-20250801164221975.png" alt="image-20250801164221975"></p>
<h3 id="ruoyi-framework"><a href="#ruoyi-framework" class="headerlink" title="ruoyi-framework"></a>ruoyi-framework</h3><p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/server/image-20250801164236304.png" alt="image-20250801164236304"></p>
<h4 id="DataScopeAspect"><a href="#DataScopeAspect" class="headerlink" title="DataScopeAspect"></a>DataScopeAspect</h4><p><strong>1.DataScopeAspect数据权限</strong>：在执行接口时，将当前用户的组织机构等查询条件利用AOP拼接上，可以看到根据在菜单页面维护的数据权限类别进行动态的拼接sql语句。核心代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">dataScopeFilter</span><span class="params">(JoinPoint joinPoint, SysUser user, String deptAlias, String userAlias)</span>&#123;</span><br><span class="line">    <span class="comment">// 拼接sql</span></span><br><span class="line">    <span class="type">StringBuilder</span> <span class="variable">sqlString</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">    <span class="keyword">for</span> (SysRole role : user.getRoles()) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">dataScope</span> <span class="operator">=</span> role.getDataScope();</span><br><span class="line">        <span class="keyword">if</span> (DATA_SCOPE_ALL.equals(dataScope)) &#123;</span><br><span class="line">            sqlString = <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (DATA_SCOPE_CUSTOM.equals(dataScope)) &#123; <span class="comment">// 自定义权限拼接</span></span><br><span class="line">            sqlString.append(StringUtils.format(</span><br><span class="line">                <span class="string">&quot; OR &#123;&#125;.dept_id IN ( SELECT dept_id FROM sys_role_dept WHERE role_id = &#123;&#125; ) &quot;</span>,</span><br><span class="line">                deptAlias, role.getRoleId()));</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (DATA_SCOPE_DEPT.equals(dataScope)) &#123; <span class="comment">// 部门权限拼接</span></span><br><span class="line">            sqlString.append(StringUtils.format(<span class="string">&quot; OR &#123;&#125;.dept_id = &#123;&#125; &quot;</span>, deptAlias, user.getDeptId()));</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (DATA_SCOPE_DEPT_AND_CHILD.equals(dataScope)) &#123; <span class="comment">// 部门及以下权限拼接</span></span><br><span class="line">            sqlString.append(StringUtils.format(</span><br><span class="line"><span class="string">&quot; OR &#123;&#125;.dept_id IN ( SELECT dept_id FROM sys_dept WHERE dept_id = &#123;&#125; or find_in_set( &#123;&#125; , ancestors ) )&quot;</span>,</span><br><span class="line">                deptAlias, user.getDeptId(), user.getDeptId()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.DataSourceAspect多数据源</strong>：利用上文DataSource注解动态的切换数据源，如果有需求可以直接使用，固定写法。</p>
<p><strong>3.LogAspect日志</strong>：全局日志收集，如用户姓名、接口方法、调用ip等，并插入数据库，比较通用功能。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">handleLog</span><span class="params">(<span class="keyword">final</span> JoinPoint joinPoint, Log controllerLog, </span></span><br><span class="line"><span class="params">                         <span class="keyword">final</span> Exception e, Object jsonResult)</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 获取当前的用户</span></span><br><span class="line">            <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> SecurityUtils.getLoginUser();</span><br><span class="line">            <span class="comment">// *========数据库日志=========*//</span></span><br><span class="line">            <span class="type">SysOperLog</span> <span class="variable">operLog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SysOperLog</span>();</span><br><span class="line">            operLog.setStatus(BusinessStatus.SUCCESS.ordinal());</span><br><span class="line">            <span class="comment">// 请求的地址</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> IpUtils.getIpAddr(ServletUtils.getRequest());</span><br><span class="line">            operLog.setOperIp(ip);</span><br><span class="line">            operLog.setOperUrl(ServletUtils.getRequest().getRequestURI());</span><br><span class="line">            <span class="comment">//获取用户姓名</span></span><br><span class="line">            <span class="keyword">if</span> (loginUser != <span class="literal">null</span>) &#123;</span><br><span class="line">                operLog.setOperName(loginUser.getUsername());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">                operLog.setStatus(BusinessStatus.FAIL.ordinal());</span><br><span class="line">                operLog.setErrorMsg(StringUtils.substring(e.getMessage(), <span class="number">0</span>, <span class="number">2000</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 设置方法名称</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> joinPoint.getTarget().getClass().getName();</span><br><span class="line">            <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> joinPoint.getSignature().getName();</span><br><span class="line">            operLog.setMethod(className + <span class="string">&quot;.&quot;</span> + methodName + <span class="string">&quot;()&quot;</span>);</span><br><span class="line">            <span class="comment">// 设置请求方式</span></span><br><span class="line">            operLog.setRequestMethod(ServletUtils.getRequest().getMethod());</span><br><span class="line">            <span class="comment">// 处理设置注解上的参数</span></span><br><span class="line">            getControllerMethodDescription(joinPoint, controllerLog, operLog, jsonResult);</span><br><span class="line">            <span class="comment">// 保存数据库</span></span><br><span class="line">            AsyncManager.me().execute(AsyncFactory.recordOper(operLog));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception exp) &#123;</span><br><span class="line">            <span class="comment">// 记录本地异常日志</span></span><br><span class="line">            log.error(<span class="string">&quot;==前置通知异常==&quot;</span>);</span><br><span class="line">            log.error(<span class="string">&quot;异常信息:&#123;&#125;&quot;</span>, exp.getMessage());</span><br><span class="line">            exp.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>RateLimiterAspect限流</strong>：将每一次的调用的ip存放在redis中，然后判断本次调用和上次调用的相隔时间。短时间调用会阻止调用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(&quot;@annotation(rateLimiter)&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doBefore</span><span class="params">(JoinPoint point, RateLimiter rateLimiter)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">    <span class="comment">//redis固定的参数</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> rateLimiter.key();</span><br><span class="line">    <span class="type">int</span> <span class="variable">time</span> <span class="operator">=</span> rateLimiter.time();</span><br><span class="line">    <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> rateLimiter.count();</span><br><span class="line">    <span class="comment">//获取ip+调用的方法</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">combineKey</span> <span class="operator">=</span> getCombineKey(rateLimiter, point);</span><br><span class="line">    List&lt;Object&gt; keys = Collections.singletonList(combineKey);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 获取一定时间内的调用次数</span></span><br><span class="line">        <span class="type">Long</span> <span class="variable">number</span> <span class="operator">=</span> redisTemplate.execute(limitScript, keys, count, time);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNull(number) || number.intValue() &gt; count) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ServiceException</span>(<span class="string">&quot;访问过于频繁，请稍候再试&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(<span class="string">&quot;限制请求&#x27;&#123;&#125;&#x27;,当前请求&#x27;&#123;&#125;&#x27;,缓存key&#x27;&#123;&#125;&#x27;&quot;</span>, count, number.intValue(), key);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ServiceException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> e;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;服务器限流异常，请稍候再试&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="config-1"><a href="#config-1" class="headerlink" title="config"></a>config</h4><p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/server/image-20250801164708417.png" alt="image-20250801164708417"></p>
<p><strong>1.DruidProperties</strong>：从application.yml中获取数据源信息。固定写法不详细描述。</p>
<p><strong>2.ApplicationConfig</strong>：配置时区信息这里不详细描述。</p>
<p><strong>3.CaptchaConfig</strong>：验证码配置，配置文字文本框格式等，固定写法。</p>
<p><strong>4.DruidConfig</strong>：多数据源配置，固定写法。</p>
<p><strong>5.FastJson2JsonRedisSerializer</strong>：redis序列化配置，固定写法。</p>
<p><strong>6.FilterConfig</strong>：过滤器配置，<code>@ConditionalOnProperty(value = &quot;xss.enabled&quot;, havingValue = &quot;true&quot;)</code>根据application.yml是否配置xss.enabled值决定是否加载该类，也就是是否开启xss拦截器。</p>
<p><strong>7.KaptchaTextCreator</strong>：验证码验证的规则，这里是计算验证码，逻辑在此类中，不详细讲解。</p>
<p><strong>8.MyBatisConfig</strong>：从application.yml动态获取mybatis包的地址。并重新封装SqlSessionFactory。实现mybatis路径的可配置化。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> SqlSessionFactory <span class="title function_">sqlSessionFactory</span><span class="params">(DataSource dataSource)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">//从application.yml获取配置</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">typeAliasesPackage</span> <span class="operator">=</span> env.getProperty(<span class="string">&quot;mybatis.typeAliasesPackage&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">mapperLocations</span> <span class="operator">=</span> env.getProperty(<span class="string">&quot;mybatis.mapperLocations&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">configLocation</span> <span class="operator">=</span> env.getProperty(<span class="string">&quot;mybatis.configLocation&quot;</span>);</span><br><span class="line">    <span class="comment">//获取实体类的包</span></span><br><span class="line">    typeAliasesPackage = setTypeAliasesPackage(typeAliasesPackage);</span><br><span class="line">    VFS.addImplClass(SpringBootVFS.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">final</span> <span class="type">SqlSessionFactoryBean</span> <span class="variable">sessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">    <span class="comment">//加入数据源</span></span><br><span class="line">    sessionFactory.setDataSource(dataSource);</span><br><span class="line">    <span class="comment">//加入实体类地址</span></span><br><span class="line">    sessionFactory.setTypeAliasesPackage(typeAliasesPackage);</span><br><span class="line">    <span class="comment">//加入mapper</span></span><br><span class="line">    sessionFactory.setMapperLocations(resolveMapperLocations(StringUtils.split(mapperLocations, <span class="string">&quot;,&quot;</span>)));</span><br><span class="line">    <span class="comment">//加入配置文件地址</span></span><br><span class="line">    sessionFactory.setConfigLocation(<span class="keyword">new</span> <span class="title class_">DefaultResourceLoader</span>().getResource(configLocation));</span><br><span class="line">    <span class="keyword">return</span> sessionFactory.getObject();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>9.RedisConfig</strong>：redis配置固定写法，如果整合redis可以参考。</p>
<p><strong>10.ResourcesConfig</strong>：通用配置，其中包括拦截器生效配置，跨域配置等 可以直接使用。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResourcesConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RepeatSubmitInterceptor repeatSubmitInterceptor;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">/** 本地文件上传路径 */</span></span><br><span class="line">        registry.addResourceHandler(Constants.RESOURCE_PREFIX + <span class="string">&quot;/**&quot;</span>)</span><br><span class="line">                .addResourceLocations(<span class="string">&quot;file:&quot;</span> + RuoYiConfig.getProfile() + <span class="string">&quot;/&quot;</span>);</span><br><span class="line">        <span class="comment">/** swagger配置 */</span></span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/swagger-ui/**&quot;</span>)</span><br><span class="line">                .addResourceLocations(<span class="string">&quot;classpath:/META-INF/resources/webjars/springfox-swagger-ui/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 配置拦截器生效</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span>&#123;   <span class="comment">//此处配置了上文点击重复的拦截器</span></span><br><span class="line">        registry.addInterceptor(repeatSubmitInterceptor).addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 跨域配置</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CorsFilter <span class="title function_">corsFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">CorsConfiguration</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorsConfiguration</span>();</span><br><span class="line">        config.setAllowCredentials(<span class="literal">true</span>);</span><br><span class="line">        <span class="comment">// 设置访问源地址</span></span><br><span class="line">        config.addAllowedOriginPattern(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="comment">// 设置访问源请求头</span></span><br><span class="line">        config.addAllowedHeader(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="comment">// 设置访问源请求方法</span></span><br><span class="line">        config.addAllowedMethod(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        <span class="comment">// 有效期 1800秒</span></span><br><span class="line">        config.setMaxAge(<span class="number">1800L</span>);</span><br><span class="line">        <span class="comment">// 添加映射路径，拦截一切请求</span></span><br><span class="line">        <span class="type">UrlBasedCorsConfigurationSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlBasedCorsConfigurationSource</span>();</span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, config);</span><br><span class="line">        <span class="comment">// 返回新的CorsFilter</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsFilter</span>(source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>11.SecurityConfig</strong>：Security的配置，如果想详细了解，请访问博主专栏：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_20143059/category_11001830.html?spm=1001.2014.3001.5482">Security入门到精通。</a></p>
<p><strong>12.ServerConfig</strong>：获取请求信息，包括：域名，端口，上下文访问路径</p>
<p><strong>13.ThreadPoolConfig</strong>：线程池配置，固定配置，其中下文的manager使用了异步线程池。</p>
<h4 id="datasource"><a href="#datasource" class="headerlink" title="datasource"></a>datasource</h4><p>多数据源固定配置，与DataSourceAspect配合使用。</p>
<h4 id="interceptor"><a href="#interceptor" class="headerlink" title="interceptor"></a>interceptor</h4><p>主要功能为不允许重复点击，主要实现为将每一次的调用信息组装为key值存放到redis中，每一次调用从redis获取该key数据验证相隔时间，核心代码如下。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isRepeatSubmit</span><span class="params">(HttpServletRequest request, RepeatSubmit annotation)</span>&#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">nowParams</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (request <span class="keyword">instanceof</span> RepeatedlyRequestWrapper)&#123;</span><br><span class="line">        <span class="type">RepeatedlyRequestWrapper</span> <span class="variable">repeatedlyRequest</span> <span class="operator">=</span> (RepeatedlyRequestWrapper) request;</span><br><span class="line">        nowParams = HttpHelper.getBodyString(repeatedlyRequest);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// body参数为空，获取Parameter的数据</span></span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isEmpty(nowParams)) &#123;</span><br><span class="line">        nowParams = JSONObject.toJSONString(request.getParameterMap());</span><br><span class="line">    &#125;</span><br><span class="line">    Map&lt;String, Object&gt; nowDataMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">    nowDataMap.put(REPEAT_PARAMS, nowParams);</span><br><span class="line">    nowDataMap.put(REPEAT_TIME, System.currentTimeMillis());</span><br><span class="line">    <span class="comment">// 请求地址（作为存放cache的key值）</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">    <span class="comment">// 唯一值（没有消息头则使用请求地址）</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">submitKey</span> <span class="operator">=</span> request.getHeader(header);</span><br><span class="line">    <span class="keyword">if</span> (StringUtils.isEmpty(submitKey)) &#123;</span><br><span class="line">        submitKey = url;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 组装成加入redis的key值</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">cacheRepeatKey</span> <span class="operator">=</span> Constants.REPEAT_SUBMIT_KEY + submitKey;</span><br><span class="line">    <span class="comment">//根据key值查询redsi</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">sessionObj</span> <span class="operator">=</span> redisCache.getCacheObject(cacheRepeatKey);</span><br><span class="line">    <span class="comment">//如果能够查询到</span></span><br><span class="line">    <span class="keyword">if</span> (sessionObj != <span class="literal">null</span>) &#123;</span><br><span class="line">        Map&lt;String, Object&gt; sessionMap = (Map&lt;String, Object&gt;) sessionObj;</span><br><span class="line">        <span class="keyword">if</span> (sessionMap.containsKey(url)) &#123;</span><br><span class="line">            Map&lt;String, Object&gt; preDataMap = (Map&lt;String, Object&gt;) sessionMap.get(url);</span><br><span class="line">            <span class="comment">// 比对参数，同时比对时间</span></span><br><span class="line">            <span class="keyword">if</span> (compareParams(nowDataMap, preDataMap) </span><br><span class="line">                &amp;&amp; compareTime(nowDataMap, preDataMap, annotation.interval())) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Map&lt;String, Object&gt; cacheMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">    cacheMap.put(url, nowDataMap);</span><br><span class="line">    redisCache.setCacheObject(cacheRepeatKey, cacheMap, annotation.interval(), TimeUnit.MILLISECONDS);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="manager"><a href="#manager" class="headerlink" title="manager"></a>manager</h4><p><code>AsyncManager、ShutdownManager</code>为异步工厂提供方法，AsyncFactory为如何使用异步，如果需要使用可以直接在类中参考编写。</p>
<h4 id="security"><a href="#security" class="headerlink" title="security"></a>security</h4><p><strong>1.JwtAuthenticationTokenFilter</strong>：主要为验证token是否正确，</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtAuthenticationTokenFilter</span> <span class="keyword">extends</span> <span class="title class_">OncePerRequestFilter</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TokenService tokenService;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doFilterInternal</span><span class="params">(HttpServletRequest request, </span></span><br><span class="line"><span class="params">                                    HttpServletResponse response, FilterChain chain)</span></span><br><span class="line">                                    <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">// 验证用户信息</span></span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> tokenService.getLoginUser(request);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotNull(loginUser) &amp;&amp; StringUtils.isNull(SecurityUtils.getAuthentication()))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 刷新token</span></span><br><span class="line">            tokenService.verifyToken(loginUser);</span><br><span class="line">            <span class="comment">// 获取用户权限对象</span></span><br><span class="line">            <span class="type">UsernamePasswordAuthenticationToken</span> <span class="variable">authenticationToken</span> <span class="operator">=</span> <span class="keyword">new</span> </span><br><span class="line">                <span class="title class_">UsernamePasswordAuthenticationToken</span>(loginUser, <span class="literal">null</span>, loginUser.getAuthorities());</span><br><span class="line">            authenticationToken.setDetails(<span class="keyword">new</span> <span class="title class_">WebAuthenticationDetailsSource</span>().buildDetails(request));</span><br><span class="line">            <span class="comment">// 将用户权限等信息存放在SecurityContext中</span></span><br><span class="line">            SecurityContextHolder.getContext().setAuthentication(authenticationToken);</span><br><span class="line">        &#125;</span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.AuthenticationEntryPointImpl、LogoutSuccessHandlerImpl</strong>：将调用信息转换为json返回的固定写法。如果有需要可以参考。</p>
<h4 id="web"><a href="#web" class="headerlink" title="web"></a>web</h4><p><strong>1.server</strong>：获取服务器信息，如cpu等，都是固定写法，如需参考直接复制即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setCpuInfo</span><span class="params">(CentralProcessor processor)</span> &#123;</span><br><span class="line">    <span class="comment">// CPU信息</span></span><br><span class="line">    <span class="type">long</span>[] prevTicks = processor.getSystemCpuLoadTicks();</span><br><span class="line">    Util.sleep(OSHI_WAIT_SECOND);</span><br><span class="line">    <span class="type">long</span>[] ticks = processor.getSystemCpuLoadTicks();</span><br><span class="line">    <span class="type">long</span> <span class="variable">nice</span> <span class="operator">=</span> ticks[TickType.NICE.getIndex()] - prevTicks[TickType.NICE.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">irq</span> <span class="operator">=</span> ticks[TickType.IRQ.getIndex()] - prevTicks[TickType.IRQ.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">softirq</span> <span class="operator">=</span> ticks[TickType.SOFTIRQ.getIndex()] - prevTicks[TickType.SOFTIRQ.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">steal</span> <span class="operator">=</span> ticks[TickType.STEAL.getIndex()] - prevTicks[TickType.STEAL.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">cSys</span> <span class="operator">=</span> ticks[TickType.SYSTEM.getIndex()] - prevTicks[TickType.SYSTEM.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">user</span> <span class="operator">=</span> ticks[TickType.USER.getIndex()] - prevTicks[TickType.USER.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">iowait</span> <span class="operator">=</span> ticks[TickType.IOWAIT.getIndex()] - prevTicks[TickType.IOWAIT.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">idle</span> <span class="operator">=</span> ticks[TickType.IDLE.getIndex()] - prevTicks[TickType.IDLE.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">totalCpu</span> <span class="operator">=</span> user + nice + cSys + idle + iowait + irq + softirq + steal;</span><br><span class="line">    cpu.setCpuNum(processor.getLogicalProcessorCount());</span><br><span class="line">    cpu.setTotal(totalCpu);</span><br><span class="line">    cpu.setSys(cSys);</span><br><span class="line">    cpu.setUsed(user);</span><br><span class="line">    cpu.setWait(iowait);</span><br><span class="line">    cpu.setFree(idle);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置内存信息</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setMemInfo</span><span class="params">(GlobalMemory memory)</span> &#123;</span><br><span class="line">    mem.setTotal(memory.getTotal());</span><br><span class="line">    mem.setUsed(memory.getTotal() - memory.getAvailable());</span><br><span class="line">    mem.setFree(memory.getAvailable());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.exception</strong>：<code>@RestControllerAdvice、@ExceptionHandler</code>全局的拦截异常，当系统中有异常时，该类会直接获取异常并输出，很多类就不用特意try catch了。架构的常用写法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(GlobalExceptionHandler.class);</span><br><span class="line">    <span class="comment">// 权限校验异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(AccessDeniedException.class)</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">handleAccessDeniedException</span><span class="params">(AccessDeniedException e, HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        log.error(<span class="string">&quot;请求地址&#x27;&#123;&#125;&#x27;,权限校验失败&#x27;&#123;&#125;&#x27;&quot;</span>, requestURI, e.getMessage());</span><br><span class="line">        <span class="keyword">return</span> AjaxResult.error(HttpStatus.FORBIDDEN, <span class="string">&quot;没有权限，请联系管理员授权&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 请求方式不支持</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(HttpRequestMethodNotSupportedException.class)</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">handleHttpRequestMethodNotSupported</span><span class="params">(HttpRequestMethodNotSupportedException e,</span></span><br><span class="line"><span class="params">            HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestURI</span> <span class="operator">=</span> request.getRequestURI();</span><br><span class="line">        log.error(<span class="string">&quot;请求地址&#x27;&#123;&#125;&#x27;,不支持&#x27;&#123;&#125;&#x27;请求&quot;</span>, requestURI, e.getMethod());</span><br><span class="line">        <span class="keyword">return</span> AjaxResult.error(e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3.service</strong>：权限相关的service。大部分都是curd的业务，这里详细说TokenService。TokenService使用jwt生成token、从token中获取数据等。大部分为jwt固定写法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从数据声明生成令牌 @param claims 数据声明 @return 令牌</span></span><br><span class="line"><span class="keyword">private</span> String <span class="title function_">createToken</span><span class="params">(Map&lt;String, Object&gt; claims)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> Jwts.builder()</span><br><span class="line">            .setClaims(claims)</span><br><span class="line">            .signWith(SignatureAlgorithm.HS512, secret).compact();</span><br><span class="line">    <span class="keyword">return</span> token;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 从令牌中获取数据声明 @param token 令牌 @return 数据声明</span></span><br><span class="line"><span class="keyword">private</span> Claims <span class="title function_">parseToken</span><span class="params">(String token)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Jwts.parser()</span><br><span class="line">            .setSigningKey(secret)</span><br><span class="line">            .parseClaimsJws(token)</span><br><span class="line">            .getBody();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ruoyi-admin"><a href="#ruoyi-admin" class="headerlink" title="ruoyi-admin"></a>ruoyi-admin</h3><p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/server/image-20250801165556243.png" alt="image-20250801165556243"></p>
<h4 id="common通用方法"><a href="#common通用方法" class="headerlink" title="common通用方法"></a>common通用方法</h4><p><strong>CaptchaController</strong>：获取验证码通过API生成验证码。详细代码不进行讲解。</p>
<p><strong>CommonController</strong>：通用的上传下载接口，如果需要直接使用即可。</p>
<h4 id="monitor监控"><a href="#monitor监控" class="headerlink" title="monitor监控"></a>monitor监控</h4><p><strong>1.CacheController监控redis</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;</span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;@ss.hasPermi(&#x27;monitor:cache:list&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping()</span></span><br><span class="line">    <span class="keyword">public</span> AjaxResult <span class="title function_">getInfo</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// redis的常用信息</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">info</span> <span class="operator">=</span> (Properties) redisTemplate.execute(</span><br><span class="line">            (RedisCallback&lt;Object&gt;) connection -&gt; connection.info()</span><br><span class="line">        );</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">commandStats</span> <span class="operator">=</span> (Properties) redisTemplate.execute(</span><br><span class="line">            (RedisCallback&lt;Object&gt;) connection -&gt; connection.info(<span class="string">&quot;commandstats&quot;</span>)</span><br><span class="line">        );</span><br><span class="line">        <span class="comment">// rediskey数量</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">dbSize</span> <span class="operator">=</span> redisTemplate.execute((RedisCallback&lt;Object&gt;) connection -&gt; connection.dbSize());</span><br><span class="line">        Map&lt;String, Object&gt; result = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">3</span>);</span><br><span class="line">        result.put(<span class="string">&quot;info&quot;</span>, info);</span><br><span class="line">        result.put(<span class="string">&quot;dbSize&quot;</span>, dbSize);</span><br><span class="line">        <span class="comment">// key的详细信息</span></span><br><span class="line">        List&lt;Map&lt;String, String&gt;&gt; pieList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        commandStats.stringPropertyNames().forEach(key -&gt; &#123;</span><br><span class="line">            Map&lt;String, String&gt; data = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">2</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">property</span> <span class="operator">=</span> commandStats.getProperty(key);</span><br><span class="line">            data.put(<span class="string">&quot;name&quot;</span>, StringUtils.removeStart(key, <span class="string">&quot;cmdstat_&quot;</span>));</span><br><span class="line">            data.put(<span class="string">&quot;value&quot;</span>, StringUtils.substringBetween(property, <span class="string">&quot;calls=&quot;</span>, <span class="string">&quot;,usec&quot;</span>));</span><br><span class="line">            pieList.add(data);</span><br><span class="line">        &#125;);</span><br><span class="line">        result.put(<span class="string">&quot;commandStats&quot;</span>, pieList);</span><br><span class="line">        <span class="keyword">return</span> AjaxResult.success(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.ServerController服务器监控</strong>：主要监控正在运行服务器的信息，核心代码如下，如果需要使用直接复制即可。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">copyTo</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">SystemInfo</span> <span class="variable">si</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SystemInfo</span>();</span><br><span class="line">    <span class="type">HardwareAbstractionLayer</span> <span class="variable">hal</span> <span class="operator">=</span> si.getHardware();</span><br><span class="line">    setCpuInfo(hal.getProcessor());</span><br><span class="line">    setMemInfo(hal.getMemory());</span><br><span class="line">    setSysInfo();</span><br><span class="line">    setJvmInfo();</span><br><span class="line">    setSysFiles(si.getOperatingSystem());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置CPU信息</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setCpuInfo</span><span class="params">(CentralProcessor processor)</span> &#123;</span><br><span class="line">    <span class="comment">// CPU信息</span></span><br><span class="line">    <span class="type">long</span>[] prevTicks = processor.getSystemCpuLoadTicks();</span><br><span class="line">    Util.sleep(OSHI_WAIT_SECOND);</span><br><span class="line">    <span class="type">long</span>[] ticks = processor.getSystemCpuLoadTicks();</span><br><span class="line">    <span class="type">long</span> <span class="variable">nice</span> <span class="operator">=</span> ticks[TickType.NICE.getIndex()] - prevTicks[TickType.NICE.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">irq</span> <span class="operator">=</span> ticks[TickType.IRQ.getIndex()] - prevTicks[TickType.IRQ.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">softirq</span> <span class="operator">=</span> ticks[TickType.SOFTIRQ.getIndex()] - prevTicks[TickType.SOFTIRQ.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">steal</span> <span class="operator">=</span> ticks[TickType.STEAL.getIndex()] - prevTicks[TickType.STEAL.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">cSys</span> <span class="operator">=</span> ticks[TickType.SYSTEM.getIndex()] - prevTicks[TickType.SYSTEM.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">user</span> <span class="operator">=</span> ticks[TickType.USER.getIndex()] - prevTicks[TickType.USER.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">iowait</span> <span class="operator">=</span> ticks[TickType.IOWAIT.getIndex()] - prevTicks[TickType.IOWAIT.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">idle</span> <span class="operator">=</span> ticks[TickType.IDLE.getIndex()] - prevTicks[TickType.IDLE.getIndex()];</span><br><span class="line">    <span class="type">long</span> <span class="variable">totalCpu</span> <span class="operator">=</span> user + nice + cSys + idle + iowait + irq + softirq + steal;</span><br><span class="line">    cpu.setCpuNum(processor.getLogicalProcessorCount());</span><br><span class="line">    cpu.setTotal(totalCpu);</span><br><span class="line">    cpu.setSys(cSys);</span><br><span class="line">    cpu.setUsed(user);</span><br><span class="line">    cpu.setWait(iowait);</span><br><span class="line">    cpu.setFree(idle);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置内存信息</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setMemInfo</span><span class="params">(GlobalMemory memory)</span> &#123;</span><br><span class="line">    mem.setTotal(memory.getTotal());</span><br><span class="line">    mem.setUsed(memory.getTotal() - memory.getAvailable());</span><br><span class="line">    mem.setFree(memory.getAvailable());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置服务器信息</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setSysInfo</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Properties</span> <span class="variable">props</span> <span class="operator">=</span> System.getProperties();</span><br><span class="line">    sys.setComputerName(IpUtils.getHostName());</span><br><span class="line">    sys.setComputerIp(IpUtils.getHostIp());</span><br><span class="line">    sys.setOsName(props.getProperty(<span class="string">&quot;os.name&quot;</span>));</span><br><span class="line">    sys.setOsArch(props.getProperty(<span class="string">&quot;os.arch&quot;</span>));</span><br><span class="line">    sys.setUserDir(props.getProperty(<span class="string">&quot;user.dir&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置Java虚拟机</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setJvmInfo</span><span class="params">()</span> <span class="keyword">throws</span> UnknownHostException &#123;</span><br><span class="line">    <span class="type">Properties</span> <span class="variable">props</span> <span class="operator">=</span> System.getProperties();</span><br><span class="line">    jvm.setTotal(Runtime.getRuntime().totalMemory());</span><br><span class="line">    jvm.setMax(Runtime.getRuntime().maxMemory());</span><br><span class="line">    jvm.setFree(Runtime.getRuntime().freeMemory());</span><br><span class="line">    jvm.setVersion(props.getProperty(<span class="string">&quot;java.version&quot;</span>));</span><br><span class="line">    jvm.setHome(props.getProperty(<span class="string">&quot;java.home&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 设置磁盘信息</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setSysFiles</span><span class="params">(OperatingSystem os)</span> &#123;</span><br><span class="line">    <span class="type">FileSystem</span> <span class="variable">fileSystem</span> <span class="operator">=</span> os.getFileSystem();</span><br><span class="line">    List&lt;OSFileStore&gt; fsArray = fileSystem.getFileStores();</span><br><span class="line">    <span class="keyword">for</span> (OSFileStore fs : fsArray)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">free</span> <span class="operator">=</span> fs.getUsableSpace();</span><br><span class="line">        <span class="type">long</span> <span class="variable">total</span> <span class="operator">=</span> fs.getTotalSpace();</span><br><span class="line">        <span class="type">long</span> <span class="variable">used</span> <span class="operator">=</span> total - free;</span><br><span class="line">        <span class="type">SysFile</span> <span class="variable">sysFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SysFile</span>();</span><br><span class="line">        sysFile.setDirName(fs.getMount());</span><br><span class="line">        sysFile.setSysTypeName(fs.getType());</span><br><span class="line">        sysFile.setTypeName(fs.getName());</span><br><span class="line">        sysFile.setTotal(convertFileSize(total));</span><br><span class="line">        sysFile.setFree(convertFileSize(free));</span><br><span class="line">        sysFile.setUsed(convertFileSize(used));</span><br><span class="line">        sysFile.setUsage(Arith.mul(Arith.div(used, total, <span class="number">4</span>), <span class="number">100</span>));</span><br><span class="line">        sysFiles.add(sysFile);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3.SysLogininforController，SysOperlogController 登录日志、操作日志</strong>：主要查询前文AOP生成的日志表，普通的增删改查。</p>
<p><strong>4.SysUserOnlineController在线用户管理</strong>：主要功能为在线用户监控与强踢下线。通过查询和删除redis缓存即可实现。</p>
<h4 id="system业务代码"><a href="#system业务代码" class="headerlink" title="system业务代码"></a>system业务代码</h4><p>这里都是系统管理业务代码，写法比较统一，但是在编写过程中有部分架构的规定，下面一一说明。</p>
<p>**1.@PreAuthorize(“@ss.hasPermi(‘system:dict:list’)”)**：权限注解，上文已经详解</p>
<p><strong>2.AjaxResult</strong>：提供了 结果编码/调用信息/数据的返回格式，为前台提供了统一的返回格式。架构的基础组成部分。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AjaxResult</span> <span class="keyword">extends</span> <span class="title class_">HashMap</span>&lt;String, Object&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    <span class="comment">/** 状态码 */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">CODE_TAG</span> <span class="operator">=</span> <span class="string">&quot;code&quot;</span>;</span><br><span class="line">    <span class="comment">/** 返回内容 */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MSG_TAG</span> <span class="operator">=</span> <span class="string">&quot;msg&quot;</span>;</span><br><span class="line">    <span class="comment">/** 数据对象 */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DATA_TAG</span> <span class="operator">=</span> <span class="string">&quot;data&quot;</span>;</span><br><span class="line">    <span class="comment">// 初始化一个新创建的 AjaxResult 对象，使其表示一个空消息。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AjaxResult</span><span class="params">()</span> &#123; &#125;</span><br><span class="line">    <span class="comment">// 初始化一个新创建的 AjaxResult 对象 @param code 状态码 @param msg 返回内容</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AjaxResult</span><span class="params">(<span class="type">int</span> code, String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.put(CODE_TAG, code);</span><br><span class="line">        <span class="built_in">super</span>.put(MSG_TAG, msg);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 初始化一个新创建的 AjaxResult 对象 @param code 状态码 @param msg 返回内容 @param data 数据对象</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AjaxResult</span><span class="params">(<span class="type">int</span> code, String msg, Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>.put(CODE_TAG, code);</span><br><span class="line">        <span class="built_in">super</span>.put(MSG_TAG, msg);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isNotNull(data)) &#123;</span><br><span class="line">            <span class="built_in">super</span>.put(DATA_TAG, data);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 返回成功消息 @return 成功消息</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AjaxResult <span class="title function_">success</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> AjaxResult.success(<span class="string">&quot;操作成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3.extends BaseController</strong>：上文介绍了<code>BaseController</code>，在这里使用就可以直接调用分页、排序等方法了。不用每个类都编写。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>ruoyi框架搭建方便，依赖组件非常少。同时提供了基本的业务功能，如用户管理、部门管理、代码生成器等，但是对于技术的深度还是不太到位，如mq的使用，安全框架等技术都没有特多的涉及。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://southernfish.github.io">Southern Fish</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://southernfish.github.io/pages/framwork/ruoyi/">https://southernfish.github.io/pages/framwork/ruoyi/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://southernfish.github.io" target="_blank">Southern Fish</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/RuoYi/">RuoYi</a></div><div class="post_share"><div class="social-share" data-image="/img/article/article2.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/pages/algorithm/sliding-window/"><img class="prev-cover" src="/img/article/article4.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">滑动窗口算法</div></div></a></div><div class="next-post pull-right"><a href="/pages/framwork/mybatis-plus/"><img class="next-cover" src="/img/article/article4.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Mybatis-Plus</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Southern Fish</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">87</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/SouthernFish" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/1002721576@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">天下事岂能尽如吾意，心境须恰适，尽其在我，随遇而安。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8B%A5%E4%BE%9D%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">若依介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">1.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E7%89%B9%E7%82%B9"><span class="toc-number">1.2.</span> <span class="toc-text">核心特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E6%A0%88"><span class="toc-number">1.3.</span> <span class="toc-text">技术栈</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E8%A6%81%E6%B1%82"><span class="toc-number">1.4.</span> <span class="toc-text">环境要求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E4%BE%9B%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">1.5.</span> <span class="toc-text">提供的功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86"><span class="toc-number">1.5.1.</span> <span class="toc-text">系统管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%AE%A1%E7%90%86"><span class="toc-number">1.5.2.</span> <span class="toc-text">日志管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E7%9B%91%E6%8E%A7"><span class="toc-number">1.5.3.</span> <span class="toc-text">系统监控</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%B7%A5%E5%85%B7"><span class="toc-number">1.5.4.</span> <span class="toc-text">系统工具</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Redis%E7%AE%80%E4%BB%8B"><span class="toc-number">2.</span> <span class="toc-text">Redis简介</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E7%89%B9%E7%82%B9-1"><span class="toc-number">2.1.</span> <span class="toc-text">核心特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B8%E5%9E%8B%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">2.2.</span> <span class="toc-text">典型应用场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8E%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AF%B9%E6%AF%94"><span class="toc-number">2.3.</span> <span class="toc-text">与其他数据库对比</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Nginx%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.</span> <span class="toc-text">Nginx介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Nginx%E7%9A%84%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"><span class="toc-number">3.1.</span> <span class="toc-text">Nginx的核心功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nginx%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">3.2.</span> <span class="toc-text">Nginx的特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E9%AA%8C%E8%AF%81%E7%A0%81%E6%B5%81%E7%A8%8B"><span class="toc-number">3.3.</span> <span class="toc-text">登录验证码流程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E8%A1%8C%E5%A2%9E%E5%88%A0%E8%AF%A5%E6%9F%A5%E6%93%8D%E4%BD%9C"><span class="toc-number">3.4.</span> <span class="toc-text">进行增删该查操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E4%BD%BF%E7%94%A8"><span class="toc-number">3.4.1.</span> <span class="toc-text">代码生成使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%83%A8%E7%BD%B2"><span class="toc-number">3.4.2.</span> <span class="toc-text">部署</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E9%83%A8%E7%BD%B2"><span class="toc-number">3.4.2.1.</span> <span class="toc-text">后端部署</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E9%83%A8%E7%BD%B2"><span class="toc-number">3.4.2.2.</span> <span class="toc-text">前端部署</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E8%8B%A5%E4%BE%9D"><span class="toc-number">4.</span> <span class="toc-text">快速搭建若依</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%E6%90%AD%E5%BB%BA"><span class="toc-number">4.1.</span> <span class="toc-text">前端搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF%E6%90%AD%E5%BB%BA"><span class="toc-number">4.2.</span> <span class="toc-text">后端搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E4%BB%8B%E7%BB%8D"><span class="toc-number">4.3.</span> <span class="toc-text">代码介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ruoyi-quartz"><span class="toc-number">4.3.1.</span> <span class="toc-text">ruoyi-quartz</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ruoyi-generator"><span class="toc-number">4.3.2.</span> <span class="toc-text">ruoyi-generator</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ruoyi-system"><span class="toc-number">4.3.3.</span> <span class="toc-text">ruoyi-system</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ruoyi-common"><span class="toc-number">4.3.4.</span> <span class="toc-text">ruoyi-common</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#annotation"><span class="toc-number">4.3.4.1.</span> <span class="toc-text">annotation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#config"><span class="toc-number">4.3.4.2.</span> <span class="toc-text">config</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#constant"><span class="toc-number">4.3.4.3.</span> <span class="toc-text">constant</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#core"><span class="toc-number">4.3.4.4.</span> <span class="toc-text">core</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#exception"><span class="toc-number">4.3.4.5.</span> <span class="toc-text">exception</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#filter"><span class="toc-number">4.3.4.6.</span> <span class="toc-text">filter</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#utils"><span class="toc-number">4.3.4.7.</span> <span class="toc-text">utils</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ruoyi-framework"><span class="toc-number">4.3.5.</span> <span class="toc-text">ruoyi-framework</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DataScopeAspect"><span class="toc-number">4.3.5.1.</span> <span class="toc-text">DataScopeAspect</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#config-1"><span class="toc-number">4.3.5.2.</span> <span class="toc-text">config</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#datasource"><span class="toc-number">4.3.5.3.</span> <span class="toc-text">datasource</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#interceptor"><span class="toc-number">4.3.5.4.</span> <span class="toc-text">interceptor</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#manager"><span class="toc-number">4.3.5.5.</span> <span class="toc-text">manager</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#security"><span class="toc-number">4.3.5.6.</span> <span class="toc-text">security</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#web"><span class="toc-number">4.3.5.7.</span> <span class="toc-text">web</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ruoyi-admin"><span class="toc-number">4.3.6.</span> <span class="toc-text">ruoyi-admin</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#common%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">4.3.6.1.</span> <span class="toc-text">common通用方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#monitor%E7%9B%91%E6%8E%A7"><span class="toc-number">4.3.6.2.</span> <span class="toc-text">monitor监控</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#system%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81"><span class="toc-number">4.3.6.3.</span> <span class="toc-text">system业务代码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">4.4.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/pages/algorithm/simple_algorithm/" title="其他简单算法"><img src="/img/article/article5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="其他简单算法"/></a><div class="content"><a class="title" href="/pages/algorithm/simple_algorithm/" title="其他简单算法">其他简单算法</a><time datetime="2025-08-07T07:30:36.000Z" title="发表于 2025-08-07 15:30:36">2025-08-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/pages/algorithm/backtrack-algorithm/" title="回溯算法"><img src="/img/article/article3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="回溯算法"/></a><div class="content"><a class="title" href="/pages/algorithm/backtrack-algorithm/" title="回溯算法">回溯算法</a><time datetime="2025-08-06T10:30:36.000Z" title="发表于 2025-08-06 18:30:36">2025-08-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/pages/algorithm/greedy-algorithm/" title="贪心算法"><img src="/img/article/article5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="贪心算法"/></a><div class="content"><a class="title" href="/pages/algorithm/greedy-algorithm/" title="贪心算法">贪心算法</a><time datetime="2025-08-04T07:20:36.000Z" title="发表于 2025-08-04 15:20:36">2025-08-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/pages/algorithm/dynamic-programming/" title="动态规划算法"><img src="/img/article/article4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="动态规划算法"/></a><div class="content"><a class="title" href="/pages/algorithm/dynamic-programming/" title="动态规划算法">动态规划算法</a><time datetime="2025-08-02T06:20:36.000Z" title="发表于 2025-08-02 14:20:36">2025-08-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/pages/algorithm/sliding-window/" title="滑动窗口算法"><img src="/img/article/article4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="滑动窗口算法"/></a><div class="content"><a class="title" href="/pages/algorithm/sliding-window/" title="滑动窗口算法">滑动窗口算法</a><time datetime="2025-08-02T02:00:36.000Z" title="发表于 2025-08-02 10:00:36">2025-08-02</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/article/article2.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Southern Fish</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>
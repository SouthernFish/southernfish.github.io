<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Dubbo | Southern Fish</title><meta name="keywords" content="Dubbo"><meta name="author" content="Southern Fish"><meta name="copyright" content="Southern Fish"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Dubbo 是一个分布式服务框架，致力于提供高性能和透明化的RPC远程服务调用方案及SOA服务治理方案。">
<meta property="og:type" content="article">
<meta property="og:title" content="Dubbo">
<meta property="og:url" content="https://southernfish.github.io/pages/middleware/dubbo/index.html">
<meta property="og:site_name" content="Southern Fish">
<meta property="og:description" content="Dubbo 是一个分布式服务框架，致力于提供高性能和透明化的RPC远程服务调用方案及SOA服务治理方案。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://southernfish.github.io/img/article/article5.png">
<meta property="article:published_time" content="2025-07-10T08:11:36.000Z">
<meta property="article:modified_time" content="2025-09-17T07:51:48.709Z">
<meta property="article:author" content="Southern Fish">
<meta property="article:tag" content="Dubbo">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://southernfish.github.io/img/article/article5.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://southernfish.github.io/pages/middleware/dubbo/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Dubbo',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-09-17 15:51:48'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Southern Fish" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">87</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/article/article5.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Southern Fish</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Dubbo</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-10T08:11:36.000Z" title="发表于 2025-07-10 16:11:36">2025-07-10</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-09-17T07:51:48.709Z" title="更新于 2025-09-17 15:51:48">2025-09-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Middleware/">Middleware</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Distributed-Architecture/">Distributed Architecture</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>28分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Dubbo"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>Dubbo(读音[ˈdʌbəʊ])是阿里巴巴公司开源的一个高性能优秀的服务框架，致力于提供高性能和透明化的 RPC 远程服务调用方案，以及 SOA 服务治理方案，使得应用可通过高性能的 RPC 实现服务的输出和输入功能，可以和 Spring框架无缝集成。 Dubbo是一款高性能、轻量级的开源Java RPC框架，它提供了三大核心能力：面向接口的远程方法调用，智能容错和负载均衡，以及服务自动注册和发现。本文</p>
<blockquote>
<p>参考文章：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/huyuyang6688/article/details/76407440">Dubbo介绍、原理</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45404884/article/details/137697450">Dubbo（从入门到掌握）看完这一篇就够了</a></p>
<p><a target="_blank" rel="noopener" href="https://codeease.top/blog/pages/e8a5c9/">Dubbo两小时快速上手教程（直接代码、Spring、SpringBoot）</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/2021745?policyId=1004">从原理到选型，一文带你搞懂RPC</a>。</p>
</blockquote>
<h1 id="Dubbo"><a href="#Dubbo" class="headerlink" title="Dubbo"></a>Dubbo</h1><h2 id="什么是Dubbo"><a href="#什么是Dubbo" class="headerlink" title="什么是Dubbo"></a>什么是Dubbo</h2><p>Dubbo 是一个分布式服务框架，致力于提供高性能和透明化的 RPC 远程服务调用方案，以及 SOA 服务治理方案，支持多种传输和序列化方案。Dubbo最常用的应用就是远程调用。 官网地址：<a target="_blank" rel="noopener" href="http://dubbo.apache.org/">http://dubbo.apache.org</a></p>
<p>Dubbo中<strong>服务端最核心的对象</strong>有四个： </p>
<ul>
<li><strong>ApplicationConfig</strong>：配置当前应用信息 </li>
<li><strong>ProtocolConfig</strong>：配置提供服务的协议信息 </li>
<li><strong>RegistryConfig</strong>：配置注册相关信息 </li>
<li><strong>ServiceConfig</strong>：配置暴露的服务信息 </li>
</ul>
<p>Dubbo<strong>客户端中核心的对象</strong>有两个： </p>
<ul>
<li><strong>ApplicationConfig</strong>：配置当前应用信息 </li>
<li><strong>ReferenceConfig</strong>：配置引用的服务信息</li>
</ul>
<h2 id="核心部件"><a href="#核心部件" class="headerlink" title="核心部件"></a>核心部件</h2><p><strong>Remoting</strong>：网络通信框架，实现了 <code>sync-over-async</code> 和 <code>request-response</code> 消息机制</p>
<p><strong>RPC</strong>：一个远程过程调用的抽象，支持负载均衡、容灾和集群功能</p>
<p><strong>Registry</strong>：服务目录框架用于服务的注册和服务事件发布和订阅</p>
<h2 id="Dubbo是为了解决什么问题"><a href="#Dubbo是为了解决什么问题" class="headerlink" title="Dubbo是为了解决什么问题"></a>Dubbo是为了解决什么问题</h2><ul>
<li>当服务越来越多时，服务URL配置管理变得非常困难，F5硬件负载均衡器的单点压力也越来越大。</li>
<li>当进一步发展，服务间依赖关系变得错踪复杂，分不清哪个应用要在哪个应用之前启动，架构师都不能完整描述应用的架构关系。</li>
<li>接着，服务的调用量越来越大，服务的容量问题就暴露出来，这个服务需要多少机器支撑？什么时候该加机器？</li>
</ul>
<hr>
<h1 id="Dubbo原理"><a href="#Dubbo原理" class="headerlink" title="Dubbo原理"></a>Dubbo原理</h1><h2 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h2><ol>
<li><p><strong>节点角色</strong></p>
<p><strong>Provider</strong>：暴露服务方称之为<strong>服务提供者</strong></p>
<p><strong>Consumer</strong>：调用远程服务方称之为<strong>服务消费者</strong></p>
<p><strong>Container</strong>：服务<strong>运行容器</strong></p>
<p><strong>Registry</strong>：服务注册与发现的中心目录服务称之为<strong>服务注册中心</strong></p>
<p><strong>Monitor</strong>：统计服务的调用次数和调用时间的日志服务称之为<strong>服务监控中心</strong></p>
<p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/system/image-20250710175959362.png" alt="image-20250710175959362"></p>
</li>
<li><p><strong>工作过程</strong>（Dubbo服务启动，调用，暴露消费的过程）：</p>
<ul>
<li><strong>服务容器</strong>负责启动，加载，运行服务提供者。</li>
<li><strong>服务提供者</strong>在启动时，向注册中心注册自己提供的服务。</li>
<li><strong>服务消费者</strong>在启动时，向注册中心订阅自己所需的服务。</li>
<li><strong>注册中心</strong>返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者<ul>
<li><em>注册中心，服务提供者，服务消费者三者之间均为长连接</em>，监控中心除外。</li>
<li>注册中心通过长连接感知服务提供者的存在，服务提供者宕机，注册中心将立即推送事件通知消费者。</li>
<li>注册中心和监控中心全部宕机，不影响已运行的提供者和消费者，消费者在本地缓存了提供者列表。</li>
</ul>
</li>
<li><strong>服务消费者</strong>，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。</li>
<li><strong>服务消费者和提供者</strong>，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。</li>
</ul>
</li>
<li><p><strong>Dubbo层</strong>（10层）：</p>
<ul>
<li><strong>服务接口层</strong>（<code>Service</code>）：该层是与实际业务逻辑相关的，根据服务提供方和服务消费方的业务设计对应的接口和实现。</li>
<li><strong>配置层</strong>（<code>Config</code>）：对外配置接口，以<code>ServiceConfig</code>和<code>ReferenceConfig</code>为中心<ul>
<li>可以直接<code>new配置类</code>，也可以通过<code>spring解析配置</code>生成配置类。</li>
</ul>
</li>
<li><strong>服务代理层</strong>（<code>Proxy</code>）：负责服务注册与查询服务，以及注册服务的本地缓存。<ul>
<li>服务接口透明代理，生成服务的<code>客户端Stub</code>和<code>服务器端Skeleton</code>，以<code>ServiceProxy</code>为中心，扩展接口为<code>ProxyFactory</code>。</li>
</ul>
</li>
<li><strong>服务注册层</strong>（<code>Registry</code>）：负责生成消费者的代理对象和服务提供方的<code>Invoker</code>。<ul>
<li>封装服务地址的注册与发现,以服务URL为中心，扩展接口为<code>RegistryFactory、Registry和RegistryService</code>。</li>
<li>可能没有服务注册中心，此时服务提供方直接暴露服务。</li>
</ul>
</li>
<li><strong>集群层</strong>（<code>Cluster</code>）：负责负载均衡的策略，以及失败的策略。<ul>
<li>封装多个提供者的路由及负载均衡，并桥接注册中心，以Invoker为中心，扩展接口为<code>Cluster、Directory、Router和LoadBalance</code>。将多个服务提供方组合为一个服务提供方，实现对服务消费方来透明，只需要与一个服务提供方进行交互。</li>
</ul>
</li>
<li><strong>监控层</strong>（<code>Monitor</code>）：RPC调用次数和调用时间监控，以<code>Statistics</code>为中心，扩展接口为<code>MonitorFactory、Monitor和MonitorService</code>。</li>
<li><strong>远程调用层</strong>（<code>Protocol</code>）：封将RPC调用，支持多种RPC协议（不包含IO通信部分）。以<code>Invocation和Result</code>为中心，扩展接口为<code>Protocol、Invoker和Exporter</code>。<ul>
<li><code>Protocol</code>是服务域，它是Invoker暴露和引用的主功能入口，它负责Invoker的生命周期管理。</li>
<li><code>Invoker</code>是实体域，它是Dubbo的核心模型，其它模型都向它靠扰，或转换成它，它代表一个可执行体，可向它发起invoke调用，它有可能是一个本地的实现，也可能是一个远程的实现，也可能一个集群实现。</li>
</ul>
</li>
<li><strong>信息交换层</strong>（<code>Exchange</code>）：封装请求响应模式，同步转异步。<ul>
<li>处理各种协议的通信请求，支持<code>netty、mina、http</code>等，默认采用<code>netty</code>进行通信。</li>
<li>以<code>Request和Response</code>为中心，扩展接口为<code>Exchanger、ExchangeChannel、ExchangeClient和ExchangeServer</code>。</li>
</ul>
</li>
<li><strong>网络传输层</strong>（<code>Transport</code>）：抽象<code>mina和netty</code>为统一接口，以Message为中心，扩展接口为<code>Channel、Transporter、Client、Server和Codec</code>。</li>
<li><strong>数据序列化层</strong>（<code>Serialize</code>）：数据序列化层和可复用的一些工具，dubbo 协议缺省为 hessian2，rmi 缺省为 java，http 缺省为 json。扩展接口为<code>Serialization、 ObjectInput、ObjectOutput和ThreadPool</code>。</li>
</ul>
</li>
</ol>
<h2 id="启动时检查"><a href="#启动时检查" class="headerlink" title="启动时检查"></a>启动时检查</h2><ul>
<li>Dubbo 缺省会在启动时检查依赖的服务是否可用，不可用时会抛出异常，阻止 Spring 初始化完成，以便上线时，能及早发现问题，默认 check=“true”。</li>
<li> 可以通过 check=“false” 关闭检查，比如，测试时，有些服务不关心，或者出现了循环依赖，必须有一方先启动。 </li>
<li>另外，如果你的 Spring 容器是懒加载的，或者通过 API 编程延迟引用服务，请关闭 check，否则服务临时不可用时，会抛出异常，拿到 null 引用，如果 check=“false”，总是会返回引用，当服务恢复时，能自动连上。</li>
</ul>
<h2 id="集群容错"><a href="#集群容错" class="headerlink" title="集群容错"></a>集群容错</h2><p>在集群调用失败时，Dubbo 提供了多种容错方案，缺省为 failover 重试。</p>
<p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/system/image-20250710180009155.png" alt="image-20250710180009155"></p>
<h3 id="各节点的关系"><a href="#各节点的关系" class="headerlink" title="各节点的关系"></a>各节点的关系</h3><ol>
<li><code>Invoker</code> 是 Provider 的一个可调用 Service 的抽象，Invoker 封装了 Provider 地址及 Service 接口信息。 </li>
<li><code>Directory</code> 代表多个 Invoker，可以把它看成 List ，但与 List 不同的是，它的值可能是<strong>动态变化</strong>的，比如注册中心推送变更。 </li>
<li><code>Cluster</code> 将 Directory 中的多个 Invoker 伪装成一个 Invoker，对上层透明，伪装过程<strong>包含了容错逻辑</strong>，调用失败后重试另一个。 </li>
<li><code>Router</code> 负责从多个 Invoker 中<strong>按路由规则选出子集</strong>，比如读写分离，应用隔离等。 </li>
<li><code>LoadBalance</code> 负责从多个 Invoker 中选出具体的一个用于本次调用，选的过程<strong>包含了负载均衡算法</strong>，调用失败后，需要重选。 </li>
</ol>
<h3 id="集群容错模式"><a href="#集群容错模式" class="headerlink" title="集群容错模式"></a>集群容错模式</h3><ol>
<li><p><strong>Failover Cluster：</strong>失败自动切换（默认），当出现失败，重试其它服务器。</p>
<p>通常用于<strong>读操作</strong>，但重试会带来更长延迟。可通过 retries=“2” 来设置重试次数(不含第一次)。由<code>FailoverClusterInvoker</code>实现，原理是先获得retries的值，再通过for循环依次调用服务，如果成功则返回，如果失败则循环调用直至循环结束。  </p>
</li>
<li><p><strong>Failfast Cluster：</strong>快速失败，只发起一次调用，失败立即报错。</p>
<p>通常用于<strong>非幂等性的写操作</strong>，比如新增记录。由<code>FailfastClusterInvoker</code>实现，原理是直接调用一次。</p>
</li>
<li><p><strong>Failsafe Cluster：</strong>失败安全，出现异常时，直接忽略。</p>
<p>通常用于<strong>写入审计日志等操作</strong>。由<code>FailsaveClusterInvoker</code>实现。 </p>
</li>
<li><p><strong>Failback Cluster：</strong>失败自动恢复，后台记录失败请求，定时重发。</p>
<p>通常用于<strong>消息通知操作</strong>。由<code>FailbackClusterInvoker</code>实现，原理是，执行调用，出现异常后把错误放入<code>ConcurrentHashMap</code>，用任务调度线程池延迟5秒来重新执行调用，如果再失败，记录日志，不再调用。</p>
</li>
<li><p><strong>Forking Cluster：</strong>并行调用多个服务器，只要一个成功即返回。</p>
<p>通常用于<strong>实时性要求较高的读操作</strong>，但需要浪费更多服务资源。可通过 forks=“2” 来设置最大并行数。 </p>
</li>
<li><p><strong>Broadcast Cluster：</strong>广播调用所有提供者，逐个调用，任意一台报错则报错。</p>
<p>通常用于<strong>通知所有提供者</strong>更新缓存或日志等本地资源信息。</p>
</li>
</ol>
<h2 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h2><p>（1）<strong>随机</strong>（<code>Random LoadBalance</code>）按照权重设置随机概率（默认）。<br>（2）<strong>轮询</strong>（<code>RoundRobin LoadBalance</code>）<br>（3）<strong>最少活跃调用数</strong>（<code>LeastActive LoadBalance</code>），相同活跃调用数的随机<br>（4）<strong>一致性Hash</strong>（<code>ConsistencyHash LoadBalance</code>）一致性Hash，相同参数的请求总是发到同一提供者</p>
<h2 id="多协议"><a href="#多协议" class="headerlink" title="多协议"></a>多协议</h2><p>Dubbo 允许配置多协议，在不同服务上或者同一服务上同时支持多种协议。</p>
<ol>
<li><p>在不同服务上支持不同协议<br>不同服务在性能上适用不同协议进行传输，比如大数据用短连接协议，小数据大并发用长连接协议</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:dubbo</span>=<span class="string">&quot;http://dubbo.apache.org/schema/dubbo&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">&quot;world&quot;</span>  /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">id</span>=<span class="string">&quot;registry&quot;</span> <span class="attr">address</span>=<span class="string">&quot;10.20.141.150:9090&quot;</span> <span class="attr">username</span>=<span class="string">&quot;admin&quot;</span> <span class="attr">password</span>=<span class="string">&quot;hello1234&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 多协议配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">&quot;dubbo&quot;</span> <span class="attr">port</span>=<span class="string">&quot;20880&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">&quot;rmi&quot;</span> <span class="attr">port</span>=<span class="string">&quot;1099&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用dubbo协议暴露服务 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:service</span> <span class="attr">interface</span>=<span class="string">&quot;com.alibaba.hello.api.HelloService&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.0.0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;helloService&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;dubbo&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用rmi协议暴露服务 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:service</span> <span class="attr">interface</span>=<span class="string">&quot;com.alibaba.hello.api.DemoService&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.0.0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;demoService&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;rmi&quot;</span> /&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>在同一服务上支持多种协议<br>需要与 http 客户端互操作</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:dubbo</span>=<span class="string">&quot;http://dubbo.apache.org/schema/dubbo&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">&quot;world&quot;</span>  /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">id</span>=<span class="string">&quot;registry&quot;</span> <span class="attr">address</span>=<span class="string">&quot;10.20.141.150:9090&quot;</span> <span class="attr">username</span>=<span class="string">&quot;admin&quot;</span> <span class="attr">password</span>=<span class="string">&quot;hello1234&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 多协议配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">&quot;dubbo&quot;</span> <span class="attr">port</span>=<span class="string">&quot;20880&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">&quot;hessian&quot;</span> <span class="attr">port</span>=<span class="string">&quot;8080&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用多个协议暴露服务 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:service</span> <span class="attr">id</span>=<span class="string">&quot;helloService&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;com.alibaba.hello.api.HelloService&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.0.0&quot;</span> <span class="attr">protocol</span>=<span class="string">&quot;dubbo,hessian&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<table>
<thead>
<tr>
<th>协议</th>
<th>稳定性</th>
<th>优点</th>
<th>缺点</th>
<th>建议</th>
</tr>
</thead>
<tbody><tr>
<td>Dubbo协议</td>
<td>Stable</td>
<td>采用NIO复用单一长连接，并使用线程池并发处理请求，减少握手和加大并发效率，性能较好（推荐使用）</td>
<td>在大文件传输时，单一连接会成为瓶颈</td>
<td>可用于生产环境</td>
</tr>
<tr>
<td>Rmi协议</td>
<td>Stable</td>
<td>可与原生RMI互操作，基于TCP协议</td>
<td>偶尔会连接失败，需重建Stub</td>
<td>可用于生产环境</td>
</tr>
<tr>
<td>Hessian协议</td>
<td>Stable</td>
<td>可与原生Hessian互操作，基于HTTP协议</td>
<td>需hessian.jar支持，http短连接的开销大</td>
<td>可用于生产环境</td>
</tr>
</tbody></table>
<p>此外还支持webservice、http、Thrift、memcached、redis、rest等协议。</p>
<h2 id="Dubbo序列化"><a href="#Dubbo序列化" class="headerlink" title="Dubbo序列化"></a>Dubbo序列化</h2><table>
<thead>
<tr>
<th>协议</th>
<th>稳定性</th>
<th>优点</th>
<th>缺点</th>
<th>建议</th>
</tr>
</thead>
<tbody><tr>
<td>Hessian Serialization</td>
<td>Stable</td>
<td>性能较好，多语言支持（推荐使用）</td>
<td>Hessian的各版本兼容性不好，可能和应用使用的Hessian冲突，Dubbo内嵌了hessian3.2.1的源码</td>
<td>可用于生产环境</td>
</tr>
<tr>
<td>Dubbo Serialization</td>
<td>Stable</td>
<td>通过不传送POJO的类元信息，在大量POJO传输时，性能较好</td>
<td>当参数对象增加字段时，需外部文件声明</td>
<td>试用</td>
</tr>
<tr>
<td>Json Serialization</td>
<td>Stable</td>
<td>纯文本，可跨语言解析，缺省采用FastJson解析</td>
<td>性能较差</td>
<td>试用</td>
</tr>
<tr>
<td>Java Serialization</td>
<td>Stable</td>
<td>Java原生支持</td>
<td>性能较差</td>
<td>可用于生产环境</td>
</tr>
</tbody></table>
<h2 id="注册中心"><a href="#注册中心" class="headerlink" title="注册中心"></a>注册中心</h2><p>Dubbo 支持同一服务向多注册中心同时注册，或者不同服务分别注册到不同的注册中心上去，甚至可以同时引用注册在不同注册中心上的同名服务。另外，注册中心是支持自定义扩展的。</p>
<table>
<thead>
<tr>
<th>协议</th>
<th>稳定性</th>
<th>优点</th>
<th>缺点</th>
<th>建议</th>
</tr>
</thead>
<tbody><tr>
<td>Zookeeper注册中心</td>
<td>Stable</td>
<td>支持基于网络的集群方式，有广泛周边开源产品，建议使用dubbo-2.3.3以上版本（推荐使用）</td>
<td>依赖于Zookeeper的稳定性</td>
<td>可用于生产环境</td>
</tr>
<tr>
<td>Redis注册中心</td>
<td>Stable</td>
<td>支持基于客户端双写的集群方式，性能高</td>
<td>要求服务器时间同步，用于检查心跳过期脏数据</td>
<td>可用于生产环境</td>
</tr>
<tr>
<td>Multicast注册中心</td>
<td>Tested</td>
<td>去中心化，不需要安装注册中心</td>
<td>依赖于网络拓扑和路由，跨机房有风险</td>
<td>小规模应用或开发测试环境</td>
</tr>
<tr>
<td>Simple注册中心</td>
<td>Tested</td>
<td>Dogfooding，注册中心本身也是一个标准的RPC服务</td>
<td>没有集群支持，可能单点故障</td>
<td>试用</td>
</tr>
</tbody></table>
<h2 id="Dubbo服务降级"><a href="#Dubbo服务降级" class="headerlink" title="Dubbo服务降级"></a>Dubbo服务降级</h2><p>可以通过服务降级功能 临时屏蔽某个出错的非关键服务，并定义降级后的返回策略。<br>服务降级就是当服务响应超时或连接请求超时，不用继续等下去，而采用降级措施，返回一个我们自己定义好的提示。而为什么要使用服务降级，这是防止分布式服务发生雪崩效应。当一个请求发生超时，一直等待着服务响应，那么在高并发情况下，很多请求都是因为这样一直等着响应，直到服务资源耗尽产生宕机，而宕机之后会导致分布式其他服务调用该宕机的服务也会出现资源耗尽宕机，这样下去将导致整个分布式服务都瘫痪。集群环境下，当一台服务宕机之后，其他流量分发到其他集群机器上，压力也会随之加大，时间久了整个集群也会垮了，这只是个时间问题。为了防止产生了雪崩效应那么就该对服务配置降级，一旦请求超过规定时间立即返回自定义好的提示，无需继续等待。<br>dubbo中有提供一个叫做mock的配置，mock只在出现非业务异常(比如超时，网络异常等)时执行。mock的配置支持两种：<br>（1）采用return null,返回简单的空<br>打开项目里的consumer.xml修改dubbo:reference配置即可：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:reference</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">check</span>=<span class="string">&quot;false&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;com.cwh.service.UserService&quot;</span> <span class="attr">timeout</span>=<span class="string">&quot;3000&quot;</span> <span class="attr">mock</span>=<span class="string">&quot;return null&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>在服务提供者例如UserServiceImpl中的getUser方法打个断点来模拟请求超时。然后浏览器访问，断点不过，一致等待，当时间超过3秒，直接返回了空，这样就已经实现了一个简单的服务降级了<br>（2）采用自定义提示</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:reference</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">check</span>=<span class="string">&quot;false&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;com.cwh.service.UserService&quot;</span> <span class="attr">timeout</span>=<span class="string">&quot;3000&quot;</span> <span class="attr">mock</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>在service包下也就是同UserService目录下新建一个UserServiceMock，注意这里名字一点要是该接口名+Mock：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceMock</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt;getUser(String name)&#123;</span><br><span class="line">        <span class="comment">//throw new RuntimeException(&quot;服务降级-----&quot;);</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setUserName(<span class="string">&quot;服务降级啦&quot;</span>);</span><br><span class="line">        user.setUserAge(<span class="string">&quot;500&quot;</span>);</span><br><span class="line">        List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;User&gt;();</span><br><span class="line">        list.add(user);</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Dubbo灰度发布"><a href="#Dubbo灰度发布" class="headerlink" title="Dubbo灰度发布"></a>Dubbo灰度发布</h2><p>当一个接口实现，出现不兼容升级时，可以用版本号过渡，版本号不同的服务相互间不引用，用法如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:service</span> <span class="attr">interface</span>=<span class="string">&quot;com.alibaba.dubbo.demo.DemoService&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;demoService&quot;</span> <span class="attr">version</span>=<span class="string">&quot;1.0.0&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>利用dubbo该特性，我们能够实现一些功能的灰度发布，实现步骤如下： </p>
<ol>
<li>接口旧的实现定义version=“1.0.0”，接口新的实现version=“2.0.0” </li>
<li>Consumer端定义version=”*” </li>
<li>这样定义Provider和Consumer后，新旧接口实现各承担50%的流量 </li>
<li>利用dubbo该特性，还能完成不兼容版本迁移：<ol>
<li>在低压力时间段，先升级一半Provider为新版本；</li>
<li>再将所有消费者升级为新版本；</li>
<li>然后将剩下的一半提供者升级为新版本。</li>
</ol>
</li>
</ol>
<h2 id="Dubbo异步调用"><a href="#Dubbo异步调用" class="headerlink" title="Dubbo异步调用"></a>Dubbo异步调用</h2><p>默认是同步等待结果阻塞的，支持异步调用。通过<code>asyanc</code>属性设置异步，若设置异步，则无需等待该方法返回值，程序即可往下进行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> Methoda();</span><br><span class="line">Sysout(o);</span><br><span class="line">Methodb();</span><br></pre></td></tr></table></figure>

<p>(1) 打印结果为null     (2) Timeout不会超时，所以不会重试</p>
<p>Dubbo 是基于 NIO 的非阻塞实现并行调用，客户端不需要启动多线程即可完成并行调用多个远程服务，相对多线程开销较小，异步调用会返回一个 Future 对象。异步调用流程图如下：</p>
<p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/system/image-20250710180027041.png" alt="image-20250710180027041"></p>
<hr>
<h1 id="Dubbo实践"><a href="#Dubbo实践" class="headerlink" title="Dubbo实践"></a>Dubbo实践</h1><h2 id="Dubbo快速入门"><a href="#Dubbo快速入门" class="headerlink" title="Dubbo快速入门"></a>Dubbo快速入门</h2><ol>
<li>创建服务提供者<code>Provider</code>模块</li>
<li>创建服务消费者<code>Consumer</code>模块</li>
<li>在服务提供者模块编写<code>UserServiceImpl</code>提供服务</li>
<li>在服务消费者中的<code>UserController</code>远程调用<code>UserServiceImpl</code>提供的服务</li>
<li>分别启动两个服务，测试</li>
</ol>
<h2 id="企业中如何通过Dubbo实现分布式调用"><a href="#企业中如何通过Dubbo实现分布式调用" class="headerlink" title="企业中如何通过Dubbo实现分布式调用"></a>企业中如何通过Dubbo实现分布式调用</h2><p>在企业中，如果消费者直接通过RPC去调用提供者，理论上需要把提供者的整个Jar包引入到项目中。但是这样的话服务提供这种的其他无关代码也会被引入其中，导致代码污染。</p>
<p>因此实际开发过程中，服务提供者和调用者之间会增加一层Client模块。这个Client中主要写的是Service的接口定义，接口的返回实例对象以及接口的请求实例对象。简单来讲，所有的定义都在Client中完成。 使用时，服务提供者引入这个Client，然后写实现方法，服务消费者引入这个Client，然后通过dubbo直接调用即可。 </p>
<p>另外企业开发中，可能会出现多个接口实现，这种情况下可以给Service设定group、version等进行区分。</p>
<h2 id="dubbo-client-模块"><a href="#dubbo-client-模块" class="headerlink" title="dubbo-client 模块"></a>dubbo-client 模块</h2><p>定义一个<strong>公共的客户端服务</strong>，命名为<code>dubbo-client</code>，这个服务里存放的是service接口，整体代码结构如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dubbo-client</span><br><span class="line">    src</span><br><span class="line">        main</span><br><span class="line">            java</span><br><span class="line">                entity</span><br><span class="line">                    User</span><br><span class="line">                service</span><br><span class="line">                    UserService(interface)</span><br><span class="line">            resources</span><br><span class="line">                application.yml</span><br></pre></td></tr></table></figure>

<p>UserService接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 接口类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    User <span class="title function_">getUser</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义User类</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> -<span class="number">9206514891359830486L</span>;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="dubbo-provider-模块"><a href="#dubbo-provider-模块" class="headerlink" title="dubbo-provider 模块"></a>dubbo-provider 模块</h2><p>服务提供者引入 dubbo-client 工程，写实现类，提供dubbo接口，见后文配置文件编写。</p>
<p>服务提供者需要写服务的实现类，这里需要注意**@Service注解采用的是dubbo包下**：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.javayz.client.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.javayz.client.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.apache.dubbo.config.annotation.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(id);</span><br><span class="line">        user.setName(<span class="string">&quot;javayz&quot;</span>);</span><br><span class="line">        user.setSex(<span class="string">&quot;man&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接着在启动类上添加一个<code>@EnableDubbo</code>注解:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableDubbo</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringbootproviderApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringbootproviderApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="dubbo-consumer-模块"><a href="#dubbo-consumer-模块" class="headerlink" title="dubbo-consumer 模块"></a>dubbo-consumer 模块</h2><p>服务消费者引入 dubbo-client 工程，通过这个工程的service接口调用，见后文配置文件编写。</p>
<p>服务的消费者同样是先编辑好配置文件，如上，接着通过**@Reference注解将service对象引进来**:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringbootconsumerApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Reference</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringbootconsumerApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ApplicationRunner <span class="title function_">getBean</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> args -&gt; &#123;</span><br><span class="line">            System.out.println(userService.getUser(<span class="number">1L</span>));</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="provider-与-consumer-配置文件"><a href="#provider-与-consumer-配置文件" class="headerlink" title="provider 与 consumer 配置文件"></a>provider 与 consumer 配置文件</h2><h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入项目 dubbo-client --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.javayz<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 引入 zookeeper --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.dubbo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-dependencies-zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>    </span><br><span class="line">    <span class="comment">&lt;!-- 引入 dubbo --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.dubbo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="SpringBoot方式"><a href="#SpringBoot方式" class="headerlink" title="SpringBoot方式"></a>SpringBoot方式</h3><p>application.properties</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dubbo.application.name</span>=<span class="string">dubbo-provider</span></span><br><span class="line"><span class="comment"># 若是替换成消费者 dubbo-consumer</span></span><br><span class="line"><span class="attr">dubbo.registry.address</span>=<span class="string">zookeeper://127.0.0.1:2181</span></span><br><span class="line"><span class="attr">dubbo.protocol.name</span>=<span class="string">dubbo</span></span><br><span class="line"><span class="attr">dubbo.protocol.port</span>=<span class="string">20880</span></span><br></pre></td></tr></table></figure>

<p>或者 application.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dubbo:</span></span><br><span class="line">  <span class="attr">registry:</span></span><br><span class="line">    <span class="attr">address:</span> <span class="string">zookeeper://127.0.0.1:2181</span>   <span class="comment"># 自己的zookeeper服务器的IP:默认端口号</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">dubbo-zookeeper-producer1</span> <span class="comment"># 注册进去的名字 服务提供者</span></span><br><span class="line">    <span class="comment"># name: dubbo-zookeeper-consumer1 # 若是消费者替换成dubbo-zookeeper-consumer1</span></span><br><span class="line">  <span class="attr">protocol:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">dubbo</span>     <span class="comment"># 设置类型</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">-1</span>      <span class="comment"># 因为dubbo的服务器端口号是不能唯一的，所以，设置为-1会帮我们自动改变端口号</span></span><br><span class="line">  <span class="attr">config-center:</span></span><br><span class="line">    <span class="attr">timeout:</span> <span class="number">120000</span>  <span class="comment"># 超时时间  （毫秒）</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9001</span></span><br><span class="line">  <span class="comment"># port: 8083  # 若是消费者替换成8083</span></span><br></pre></td></tr></table></figure>

<h3 id="Spring方式"><a href="#Spring方式" class="headerlink" title="Spring方式"></a>Spring方式</h3><p>在resource文件夹下新建两个配置文件： provider.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:dubbo</span>=<span class="string">&quot;http://dubbo.apache.org/schema/dubbo&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans-4.3.xsd        http://dubbo.apache.org/schema/dubbo        http://dubbo.apache.org/schema/dubbo/dubbo.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 提供方应用信息，用于计算依赖关系 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">&quot;sample-provider&quot;</span>  /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用zookeeper广播注册中心暴露服务地址 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">&quot;zookeeper://192.168.78.128:2181&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 用dubbo协议在20880端口暴露服务 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:protocol</span> <span class="attr">name</span>=<span class="string">&quot;dubbo&quot;</span> <span class="attr">port</span>=<span class="string">&quot;20880&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 声明需要暴露的服务接口 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:service</span> <span class="attr">interface</span>=<span class="string">&quot;com.javayz.client.service.UserService&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;userService&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 和本地bean一样实现服务 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.javayz.example1.service.impl.UserServiceImpl&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>consumer.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:dubbo</span>=<span class="string">&quot;http://dubbo.apache.org/schema/dubbo&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans-4.3.xsd        http://dubbo.apache.org/schema/dubbo        http://dubbo.apache.org/schema/dubbo/dubbo.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:application</span> <span class="attr">name</span>=<span class="string">&quot;sample-consumer&quot;</span>  /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:registry</span> <span class="attr">address</span>=<span class="string">&quot;zookeeper://192.168.78.128:2181&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dubbo:reference</span> <span class="attr">id</span>=<span class="string">&quot;userService&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;com.javayz.client.service.UserService&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>接着是服务的提供者和消费者配置注入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 服务提供者</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringDubboProvider</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        ClassPathXmlApplicationContext context=<span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;provider.xml&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;服务已经暴露&quot;</span>);</span><br><span class="line">        System.in.read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务消费者</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringDubboConsumer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        ClassPathXmlApplicationContext context=<span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;consumer.xml&quot;</span>);</span><br><span class="line">        <span class="type">UserService</span> <span class="variable">bean</span> <span class="operator">=</span> context.getBean(UserService.class);</span><br><span class="line">        System.out.println(bean.getUser(<span class="number">1L</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="dubbo的常用配置"><a href="#dubbo的常用配置" class="headerlink" title="dubbo的常用配置"></a>dubbo的常用配置</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dubbo:application</span>/&gt;</span> 用于配置当前应用信息</span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:register</span>/&gt;</span> 用于配置连接注册相关信息</span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:protocol</span>/&gt;</span> 用于配置提供服务的协议信息，提供者指定协议，消费者被动接受</span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:service</span>/&gt;</span> 用于暴露一个服务，一个服务可以用多个协议暴露，一个服务也可以注册到多个注册中心</span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:provider</span>/&gt;</span> 当ProtocolConfig和ServiceConfig某属性没有配置时，采用此缺省值</span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:consumer</span>/&gt;</span> 当ReferenceConfig某属性没有配置时，采用此缺省值</span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:reference</span>/&gt;</span> 用于创建一个远程服务代理</span><br></pre></td></tr></table></figure>

<h2 id="直接代码"><a href="#直接代码" class="headerlink" title="直接代码"></a>直接代码</h2><h3 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.dubbo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.javayz<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 若使用注册中心，以zookeeper为例，需引入zookeeper相关依赖： zk客户端依赖：curator --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-recipes<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.13.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-framework<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.13.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="编写服务提供者"><a href="#编写服务提供者" class="headerlink" title="编写服务提供者"></a>编写服务提供者</h3><p>服务提供者主要配置以下几个属性： </p>
<ol>
<li>**<code>application</code>**：设置应用的名称等信息 </li>
<li>**<code>protocol </code>**：设置服务的协议 </li>
<li>**<code>register</code>**：设置服务的连接方式 </li>
<li>**<code>service</code>**：将需要暴露的服务注册出来</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DubboProvider</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//暴露UserService服务</span></span><br><span class="line">        <span class="comment">//1、application</span></span><br><span class="line">        ApplicationConfig applicationConfig=<span class="keyword">new</span> <span class="title class_">ApplicationConfig</span>(<span class="string">&quot;sample-provider&quot;</span>);</span><br><span class="line">        <span class="comment">//2、protocol -dubbo协议</span></span><br><span class="line">        <span class="type">ProtocolConfig</span> <span class="variable">protocolConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProtocolConfig</span>();</span><br><span class="line">        protocolConfig.setName(<span class="string">&quot;dubbo&quot;</span>);</span><br><span class="line">        protocolConfig.setPort(<span class="number">20880</span>);</span><br><span class="line">        <span class="comment">//3、register</span></span><br><span class="line">        <span class="comment">//直连的方式，不暴露到注册中心</span></span><br><span class="line">        RegistryConfig registryConfig=<span class="keyword">new</span> <span class="title class_">RegistryConfig</span>(RegistryConfig.NO_AVAILABLE);</span><br><span class="line">        <span class="comment">//通过注册中心暴露dubbo</span></span><br><span class="line">        RegistryConfig registryConfig=<span class="keyword">new</span> <span class="title class_">RegistryConfig</span>(<span class="string">&quot;zookeeper://127.0.0.1:2181&quot;</span>); </span><br><span class="line">        <span class="comment">//4、service</span></span><br><span class="line">        ServiceConfig serviceConfig=<span class="keyword">new</span> <span class="title class_">ServiceConfig</span>();</span><br><span class="line">        serviceConfig.setInterface(UserService.class);</span><br><span class="line">        serviceConfig.setRef(<span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>());</span><br><span class="line">        <span class="comment">//5、将application、protocol、register注册到service</span></span><br><span class="line">        serviceConfig.setRegistry(registryConfig);</span><br><span class="line">        serviceConfig.setProtocol(protocolConfig);</span><br><span class="line">        serviceConfig.setApplication(applicationConfig);</span><br><span class="line">        serviceConfig.export();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;服务已经暴露&quot;</span>);</span><br><span class="line">        System.in.read();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="编写服务消费者"><a href="#编写服务消费者" class="headerlink" title="编写服务消费者"></a>编写服务消费者</h3><p>消费者的实现主要就三步： </p>
<ol>
<li><strong>配置<code>application</code>：</strong>设置应用的名称等信息</li>
<li><strong>配置<code>reference</code>：</strong>主要配置要引用的信息 </li>
<li>获取到接口，调用服务。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DubboConsumer</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//1、application</span></span><br><span class="line">        ApplicationConfig applicationConfig=<span class="keyword">new</span> <span class="title class_">ApplicationConfig</span>(<span class="string">&quot;sample-consumer&quot;</span>);</span><br><span class="line">        <span class="comment">//2、配置reference</span></span><br><span class="line">        ReferenceConfig referenceConfig=<span class="keyword">new</span> <span class="title class_">ReferenceConfig</span>();</span><br><span class="line">        referenceConfig.setApplication(applicationConfig);</span><br><span class="line">        referenceConfig.setInterface(UserService.class);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// referenceConfig.setUrl(&quot;dubbo://172.18.2.49:20880/com.javayz.client.service.UserService?anyhost=true&amp;application=sample&amp;bind.ip=172.18.2.49&amp;bind.port=20880&amp;deprecated=false&amp;dubbo=2.0.2&amp;dynamic=true&amp;generic=false&amp;interface=com.javayz.client.service.UserService&amp;methods=getUser&amp;pid=5936&amp;release=2.7.4.1&amp;side=provider&amp;timestamp=1618036935244&quot;);</span></span><br><span class="line">        <span class="comment">// 或者 将referenceConfig中的setUrl方法替换为zookeeper</span></span><br><span class="line">        RegistryConfig registryConfig=<span class="keyword">new</span> <span class="title class_">RegistryConfig</span>(<span class="string">&quot;zookeeper://192.168.78.128:2181&quot;</span>);</span><br><span class="line">        referenceConfig.setRegistry(registryConfig);</span><br><span class="line">        </span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) referenceConfig.get();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.getUser(<span class="number">1L</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>先启动提供者，再启动消费者，如果user信息打印出来了就说明调用成功。</p>
<h1 id="Dubbo-amp-Spring-Cloud"><a href="#Dubbo-amp-Spring-Cloud" class="headerlink" title="Dubbo &amp; Spring Cloud"></a>Dubbo &amp; Spring Cloud</h1><h2 id="Dubbo特点"><a href="#Dubbo特点" class="headerlink" title="Dubbo特点"></a>Dubbo特点</h2><ul>
<li><strong>远程通讯</strong>：提供对多种基于长连接的 NIO 框架抽象封装（非阻塞 I/O 的通信方式，Mina/Netty/Grizzly），包括多种线程模型，序列化（Hessian2/ProtoBuf），以及“请求-响应”模式的信息交换方式。 </li>
<li><strong>集群容错</strong>：提供基于接口方法的透明远程过程调用（RPC），包括多协议支持（自定义 RPC 协议），以及软负载均衡（Random/RoundRobin），失败容错（Failover/Failback），地址路由，动态配置等集群支持。</li>
<li><strong>自动发现</strong>：基于注册中心目录服务，使服务消费方能动态的查找服务提供方，使地址透明，使服务提供方可以平滑增加或减少机器。</li>
</ul>
<h2 id="Spring-Cloud"><a href="#Spring-Cloud" class="headerlink" title="Spring Cloud"></a>Spring Cloud</h2><p>Spring Cloud 基于 Spring Boot，为微服务体系开发中的架构问题，提供了一整套的解决方案——服务注册与发现，服务消费，服务保护与熔断，网关，分布式调用追踪，分布式配置管理等。</p>
<p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/system/3e222e0786824db289336b44de42cb1.png" alt="3e222e0786824db289336b44de42cb1"></p>
<p><img src="https://raw.githubusercontent.com/SouthernFish/ImageHostServer/main/system/df9a39637a9f01e8fb2d0e6cc490967.png" alt="df9a39637a9f01e8fb2d0e6cc490967"></p>
<h2 id="Dubbo-vs-Spring-Cloud"><a href="#Dubbo-vs-Spring-Cloud" class="headerlink" title="Dubbo vs Spring Cloud"></a>Dubbo vs Spring Cloud</h2><table>
<thead>
<tr>
<th></th>
<th>Dubbo</th>
<th>Spring Cloud</th>
</tr>
</thead>
<tbody><tr>
<td>服务注册中心</td>
<td>Zookeeper</td>
<td>Spring Cloud Netflix Eureka</td>
</tr>
<tr>
<td>服务调用方式</td>
<td>RPC</td>
<td>REST API</td>
</tr>
<tr>
<td>服务监控</td>
<td>Dubbo-monitor</td>
<td>Spring Boot Admin</td>
</tr>
<tr>
<td>断路器</td>
<td>不完善</td>
<td>Spring Cloud Netflix Hystrix</td>
</tr>
<tr>
<td>服务网关</td>
<td>无</td>
<td>Spring Cloud Netflix Zuul</td>
</tr>
<tr>
<td>分布式配置</td>
<td>无</td>
<td>Spring Cloud Config</td>
</tr>
<tr>
<td>服务跟踪</td>
<td>无</td>
<td>Spring Cloud Sleuth</td>
</tr>
<tr>
<td>消息总线</td>
<td>无</td>
<td>Spring Cloud Bus</td>
</tr>
<tr>
<td>数据流</td>
<td>无</td>
<td>Spring Cloud Stream</td>
</tr>
<tr>
<td>批量任务</td>
<td>无</td>
<td>Spring Cloud Task</td>
</tr>
<tr>
<td>……</td>
<td>……</td>
<td>……</td>
</tr>
</tbody></table>
<p>使用 Dubbo 构建的微服务架构就像组装电脑，各环节的选择自由度很高，但最终结果很有可能因为一条内存质量不行就点不亮了；而 Spring Cloud 就像品牌机，在 Spring Source 的整合下，做了大量的兼容性测试，保证了机器拥有更高的稳定性，但若要在使用非原装组件外的东西，就需要对其基础有足够的了解。</p>
<p>Spring Cloud是真正的微服务框架、提供整套的组件支持、使用简单方便、强大的社区支持等等，另外考虑到 .NET/.NET Core 的兼容处理，RPC 并不能很好的实现跨语言（需要借助跨语言库，比如 gRPC、Thrift，但因为 Dubbo 本身就是“gRPC”，在 Dubbo 之上再包一层 gRPC，有点重复封装了），而 HTTP REST 本身就是支持跨语言实现，所以，Spring Cloud 这一点还是非常好的（Dubbox 也支持，但性能相比要差一些）。</p>
<p>凡事无绝对，每件事物有好的地方也有不好的地方，总的来说，Dubbo 和 Spring Cloud 的主要不同体现在两个方面：服务调用方式不同和专注点不同（生态不同）。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://southernfish.github.io">Southern Fish</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://southernfish.github.io/pages/middleware/dubbo/">https://southernfish.github.io/pages/middleware/dubbo/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://southernfish.github.io" target="_blank">Southern Fish</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Dubbo/">Dubbo</a></div><div class="post_share"><div class="social-share" data-image="/img/article/article5.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/pages/java/java-job/"><img class="prev-cover" src="/img/article/article2.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">定时任务</div></div></a></div><div class="next-post pull-right"><a href="/pages/middleware/rpc/"><img class="next-cover" src="/img/article/article4.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">远程过程调用</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Southern Fish</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">87</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">16</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/SouthernFish" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/1002721576@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">天下事岂能尽如吾意，心境须恰适，尽其在我，随遇而安。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Dubbo"><span class="toc-number">1.</span> <span class="toc-text">Dubbo</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFDubbo"><span class="toc-number">1.1.</span> <span class="toc-text">什么是Dubbo</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E9%83%A8%E4%BB%B6"><span class="toc-number">1.2.</span> <span class="toc-text">核心部件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dubbo%E6%98%AF%E4%B8%BA%E4%BA%86%E8%A7%A3%E5%86%B3%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98"><span class="toc-number">1.3.</span> <span class="toc-text">Dubbo是为了解决什么问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Dubbo%E5%8E%9F%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">Dubbo原理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84"><span class="toc-number">2.1.</span> <span class="toc-text">架构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E6%97%B6%E6%A3%80%E6%9F%A5"><span class="toc-number">2.2.</span> <span class="toc-text">启动时检查</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99"><span class="toc-number">2.3.</span> <span class="toc-text">集群容错</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%84%E8%8A%82%E7%82%B9%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">2.3.1.</span> <span class="toc-text">各节点的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4%E5%AE%B9%E9%94%99%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.3.2.</span> <span class="toc-text">集群容错模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"><span class="toc-number">2.4.</span> <span class="toc-text">负载均衡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.5.</span> <span class="toc-text">多协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dubbo%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">2.6.</span> <span class="toc-text">Dubbo序列化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"><span class="toc-number">2.7.</span> <span class="toc-text">注册中心</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dubbo%E6%9C%8D%E5%8A%A1%E9%99%8D%E7%BA%A7"><span class="toc-number">2.8.</span> <span class="toc-text">Dubbo服务降级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dubbo%E7%81%B0%E5%BA%A6%E5%8F%91%E5%B8%83"><span class="toc-number">2.9.</span> <span class="toc-text">Dubbo灰度发布</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dubbo%E5%BC%82%E6%AD%A5%E8%B0%83%E7%94%A8"><span class="toc-number">2.10.</span> <span class="toc-text">Dubbo异步调用</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Dubbo%E5%AE%9E%E8%B7%B5"><span class="toc-number">3.</span> <span class="toc-text">Dubbo实践</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Dubbo%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-number">3.1.</span> <span class="toc-text">Dubbo快速入门</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%81%E4%B8%9A%E4%B8%AD%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87Dubbo%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E8%B0%83%E7%94%A8"><span class="toc-number">3.2.</span> <span class="toc-text">企业中如何通过Dubbo实现分布式调用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dubbo-client-%E6%A8%A1%E5%9D%97"><span class="toc-number">3.3.</span> <span class="toc-text">dubbo-client 模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dubbo-provider-%E6%A8%A1%E5%9D%97"><span class="toc-number">3.4.</span> <span class="toc-text">dubbo-provider 模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dubbo-consumer-%E6%A8%A1%E5%9D%97"><span class="toc-number">3.5.</span> <span class="toc-text">dubbo-consumer 模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#provider-%E4%B8%8E-consumer-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.6.</span> <span class="toc-text">provider 与 consumer 配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#pom-xml"><span class="toc-number">3.6.1.</span> <span class="toc-text">pom.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SpringBoot%E6%96%B9%E5%BC%8F"><span class="toc-number">3.6.2.</span> <span class="toc-text">SpringBoot方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E6%96%B9%E5%BC%8F"><span class="toc-number">3.6.3.</span> <span class="toc-text">Spring方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dubbo%E7%9A%84%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">3.6.4.</span> <span class="toc-text">dubbo的常用配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E4%BB%A3%E7%A0%81"><span class="toc-number">3.7.</span> <span class="toc-text">直接代码</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">3.7.1.</span> <span class="toc-text">引入依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E8%80%85"><span class="toc-number">3.7.2.</span> <span class="toc-text">编写服务提供者</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E8%80%85"><span class="toc-number">3.7.3.</span> <span class="toc-text">编写服务消费者</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Dubbo-amp-Spring-Cloud"><span class="toc-number">4.</span> <span class="toc-text">Dubbo &amp; Spring Cloud</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Dubbo%E7%89%B9%E7%82%B9"><span class="toc-number">4.1.</span> <span class="toc-text">Dubbo特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-Cloud"><span class="toc-number">4.2.</span> <span class="toc-text">Spring Cloud</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dubbo-vs-Spring-Cloud"><span class="toc-number">4.3.</span> <span class="toc-text">Dubbo vs Spring Cloud</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/pages/algorithm/simple_algorithm/" title="其他简单算法"><img src="/img/article/article5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="其他简单算法"/></a><div class="content"><a class="title" href="/pages/algorithm/simple_algorithm/" title="其他简单算法">其他简单算法</a><time datetime="2025-08-07T07:30:36.000Z" title="发表于 2025-08-07 15:30:36">2025-08-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/pages/algorithm/backtrack-algorithm/" title="回溯算法"><img src="/img/article/article3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="回溯算法"/></a><div class="content"><a class="title" href="/pages/algorithm/backtrack-algorithm/" title="回溯算法">回溯算法</a><time datetime="2025-08-06T10:30:36.000Z" title="发表于 2025-08-06 18:30:36">2025-08-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/pages/algorithm/greedy-algorithm/" title="贪心算法"><img src="/img/article/article5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="贪心算法"/></a><div class="content"><a class="title" href="/pages/algorithm/greedy-algorithm/" title="贪心算法">贪心算法</a><time datetime="2025-08-04T07:20:36.000Z" title="发表于 2025-08-04 15:20:36">2025-08-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/pages/algorithm/dynamic-programming/" title="动态规划算法"><img src="/img/article/article4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="动态规划算法"/></a><div class="content"><a class="title" href="/pages/algorithm/dynamic-programming/" title="动态规划算法">动态规划算法</a><time datetime="2025-08-02T06:20:36.000Z" title="发表于 2025-08-02 14:20:36">2025-08-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/pages/algorithm/sliding-window/" title="滑动窗口算法"><img src="/img/article/article4.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="滑动窗口算法"/></a><div class="content"><a class="title" href="/pages/algorithm/sliding-window/" title="滑动窗口算法">滑动窗口算法</a><time datetime="2025-08-02T02:00:36.000Z" title="发表于 2025-08-02 10:00:36">2025-08-02</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/article/article5.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Southern Fish</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>
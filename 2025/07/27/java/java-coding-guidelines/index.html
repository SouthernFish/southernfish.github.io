<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>阿里规约 | Southern Fish</title><meta name="keywords" content="system"><meta name="author" content="Southern Fish"><meta name="copyright" content="Southern Fish"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="‌">
<meta property="og:type" content="article">
<meta property="og:title" content="阿里规约">
<meta property="og:url" content="https://southernfish.github.io/2025/07/27/java/java-coding-guidelines/index.html">
<meta property="og:site_name" content="Southern Fish">
<meta property="og:description" content="‌">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://southernfish.github.io/img/article/article6.png">
<meta property="article:published_time" content="2025-07-27T06:26:36.000Z">
<meta property="article:modified_time" content="2025-07-27T13:24:06.385Z">
<meta property="article:author" content="Southern Fish">
<meta property="article:tag" content="system">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://southernfish.github.io/img/article/article6.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://southernfish.github.io/2025/07/27/java/java-coding-guidelines/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '阿里规约',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-07-27 21:24:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Southern Fish" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">71</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">29</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/article/article6.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Southern Fish</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">阿里规约</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-07-27T06:26:36.000Z" title="发表于 2025-07-27 14:26:36">2025-07-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-07-27T13:24:06.385Z" title="更新于 2025-07-27 21:24:06">2025-07-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Framwork/">Framwork</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>30分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="阿里规约"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>阿里巴巴 的代码规范（ 阿里规约 ）主要包含 Java 、 C++ 、 Python 等编程语言的编码规范。最新版本可通过其 GitHub 仓库获取。</p>
<blockquote>
<p>参考文章：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40991313/article/details/134039365">【阿里规约】阿里开发手册解读——命名规范篇</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40991313/article/details/134273900">【阿里规约】阿里开发手册解读——代码格式篇</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40991313/article/details/135678947">【阿里规约】阿里开发手册解读——数据库和ORM篇</a></p>
</blockquote>
<h1>命名规范</h1>
<h2 id="包名">包名</h2>
<ul>
<li>
<p>**统一小写：**例如商品库存包com.example.product.stock，而不是com.example.productStock</p>
</li>
<li>
<p>**分隔符间单词必须单语义：**例如商品库存包com.example.product.stock，而不是com.example.product_stock、com.example.product-stock</p>
</li>
</ul>
<blockquote>
<p><strong>参考</strong>：</p>
<p>【强制】 包名统一使用小写，点分隔符之间有且仅有一个自然语义的英语单词。包名统一使用 <code>单数</code> 形式，但是类名如果有复数含义，类名可以使用复数形式。<br>
<strong>正例</strong>： 应用工具类包名为 com.alibaba.ai.util、类名为 MessageUtils（此规则参考 spring 的框架结构）</p>
</blockquote>
<h2 id="类名">类名</h2>
<h3 id="普通类和方法">普通类和方法</h3>
<ul>
<li>驼峰命名：例如UserService，而不是User_service。</li>
<li>禁止拼音英文混用；</li>
<li>禁止下划线、美元符号起始。</li>
<li>**可读性比长度重要：**命名尽可能短，但<em>望文生义</em>更重要
<ul>
<li>**可读性高（推荐）：**下面这些类既保证了望文生义，又保证了缩写
<ul>
<li>商品描述类：DescriptionOfProduct 缩写为 ProductDesc</li>
<li>应用程序配置类：ApplicationConfiguration 缩写为 AppConfig</li>
<li>客户信息类：CustomerInformation 缩写为 CustInfo。</li>
</ul>
</li>
<li><strong>可读性低（不推荐）</strong>：
<ul>
<li>AbstractClass缩写命名成 AbsClass；</li>
<li>PurchaseProduct类缩写成PurProduct;</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>参考：</strong></p>
<ul>
<li>
<p>【强制】 代码中的命名均不能以 下划线或美元符号 开始，也不能以 下划线或美元符号 结束。</p>
<p>反例： _name / <strong>name / <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mi mathvariant="normal">/</mi><mi>n</mi><mi>a</mi><mi>m</mi><msub><mi>e</mi><mi mathvariant="normal">/</mi></msub><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">name / name_ / name</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3552em;"></span><span class="mord mathnormal">nam</span><span class="mord mathnormal">e</span><span class="mord">/</span><span class="mord mathnormal">nam</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">/</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span></span></span></span></span></span></span><span class="mord mathnormal">nam</span><span class="mord mathnormal">e</span></span></span></span> / name</strong></p>
</li>
<li>
<p>【强制】 代码中的命名严禁使用拼音与英文混合的方式，更不允许直接使用中文的方式。</p>
<p>说明： 正确的英文拼写和语法可以让阅读者易于理解，避免歧义。注意，纯拼音命名方式更要避免采用。</p>
<p>正例： renminbi / alibaba / taobao / youku / hangzhou 等国际通用的名称，可视同英文。</p>
<p>反例： DaZhePromotion [打折] / getPingfenByName() [评分] / int 某变量 = 3</p>
</li>
<li>
<p>【强制】 方法名、参数名、成员变量、局部变量都统一使用 <code>lowerCamelCase</code> 风格，必须遵从驼峰形式。</p>
<p>正例： localValue / getHttpMessage() / inputUserId</p>
</li>
<li>
<p>【强制】 杜绝完全不规范的缩写，避免望文不知义。</p>
<p>反例： AbstractClass缩写命名成 AbsClass；condition缩写命名成 condi，此类随意缩写严重降低了代码的可阅读性。</p>
</li>
<li>
<p>【推荐】 为了达到代码自解释的目标，任何自定义编程元素在命名时，使用尽量完整的单词组合来表达其意。</p>
<p>正例： 在 JDK 中，表达原子更新的类名为：AtomicReferenceFieldUpdater。</p>
<p>反例： int a 的随意命名方式。</p>
</li>
<li>
<p>【推荐】 在常量与变量的命名时，表示类型的名词放在词尾，以提升辨识度。</p>
<p>正例： startTime / workQueue / nameList / TERMINATED_THREAD_COUNT</p>
<p>反例： startedAt / QueueOfWork / listName / COUNT_TERMINATED_THREAD</p>
</li>
</ul>
</blockquote>
<h3 id="测试类">测试类</h3>
<p>**命名：**待测类名+Test 。</p>
<p>**举例：**用户测试类UserServiceTest，而不是TestUserService。</p>
<blockquote>
<p><strong>参考：</strong></p>
<p>【强制】 抽象类命名使用 Abstract 或 Base 开头；异常类命名使用 Exception 结尾；</p>
<p>​		测试类命名以它要测试的类的名称开始，以 Test 结尾</p>
</blockquote>
<h3 id="抽象类">抽象类</h3>
<p><strong>命名：</strong> Abstract+自定义类名。</p>
<p>**举例：**抽象支付方式类AbstractPaymentMethod/BasePaymentMethod，而不是AbstractPayment。</p>
<h3 id="异常类">异常类</h3>
<p>**命名：**自定义异常名+Exception。</p>
<p>例如商品找不到类ProductNotFoundException，而不是ProductNotFound。</p>
<h3 id="枚举类">枚举类</h3>
<ul>
<li>**类名：**自定义类名+Enum。 例如ProcessStatusEnum</li>
<li>**成员名：**跟常量一样</li>
<li>**纯大写+下划线：**例如最大库存量MAX_STOCK_COUNT。</li>
<li>**可读性比长度重要：**常量命名全部大写，单词间用下划线隔开，力求语义表达完整清楚，不要嫌名字长。例如最大库存量MAX_STOCK_COUNT而不是MAX_COUNT。</li>
</ul>
<blockquote>
<p><strong>枚举类和常量类区别：</strong></p>
<p>**相同点：**在Java中，枚举和常量都用于表示一组固定的值，但它们适用的场景有所不同。</p>
<p><strong>不同点：</strong></p>
<ul>
<li><strong>枚举（Enum）<strong>适用于表示</strong>一组有限的可能取值</strong>，这些取值在程序中某个上下文中具有特殊意义。例如，表示一周的星期几或某个颜色的枚举类型。枚举类型可通过限定的值范围提供更好的类型安全性，并且可使用switch语句进行更清晰的代码编写。</li>
<li>**常量（Constant）**适用于表示在程序中经常使用的不可变的值。常量一般定义为 final 类型，并且通常用于表示某个固定的数值或者字符串常量。常量的值在程序中是不可修改的，可以通过常量名直接使用，提高代码的可读性和可维护性，但是可能会降低类型安全性和表达能力。</li>
</ul>
<p>总结来说，枚举适用于表示一组有限的、具有特殊意义的取值，常量适用于表示程序中经常使用的不可变的值。</p>
<p>【参考】 枚举类名带上 Enum 后缀，枚举成员名称需要全大写，单词间用下划线隔开。<br>
说明： 枚举其实就是特殊的类，域成员均为常量，且构造方法被默认强制是私有。<br>
正例： 枚举名字为 ProcessStatusEnum 的成员名称：SUCCESS / UNKNOWN_REASON</p>
</blockquote>
<h3 id="接口和实现类">接口和实现类</h3>
<ul>
<li>service和dao实现类以Impl结尾。注意不要用Imp结尾。例如UserServiceImpl而不是UserServiceImp</li>
<li>能力型接口以-able结尾。如异常根类Throwable是可抛出的，实现类Exception和Error都可抛出。如Drawable接口和Circle实现类。</li>
</ul>
<blockquote>
<p><strong>参考</strong>：接口和实现类的命名有两套规则</p>
<ol>
<li>
<p>【强制】 对于 Service 和 DAO 类，基于 SOA 的理念，暴露出来的服务一定是接口，内部的实现类用Impl 的后缀与接口区别。</p>
<p>正例： CacheServiceImpl 实现 CacheService 接口。</p>
</li>
<li>
<p>【推荐】 如果是形容能力的接口名称，取对应的形容词为接口名（通常是–able 的形容词）。</p>
<p>正例： AbstractTranslator 实现 Translatable 接口。</p>
</li>
</ol>
</blockquote>
<h3 id="PO、DTO、VO">PO、DTO、VO</h3>
<ul>
<li>**DO / BO / DTO / VO / AO / PO / UID 要大写，而非驼峰：**例如UserDO，而不是UserDo。例如serialVersionUID，而不是serialVersionUid。</li>
<li>**禁止POJO后缀：**POJO 是 DO/DTO/BO/VO 的统称，禁止命名成 xxxPOJO。</li>
</ul>
<blockquote>
<p><strong>扩展</strong>：PO、DTO、VO</p>
<ol>
<li>数据对象：xxxDO，xxx 即为数据表名。</li>
<li>DTO数据传输对象：xxxDTO，xxx 为业务领域相关的名称。</li>
<li>VO展示对象：xxxVO，xxx 一般为网页名称。</li>
<li>POJO 是 DO/DTO/BO/VO 的统称，禁止命名成 xxxPOJO。</li>
</ol>
<p><strong>参考</strong>：<br>
【强制】 类名使用 UpperCamelCase 风格，但以下情形例外：DO / BO / DTO / VO / AO / PO / UID 等。<br>
正例： JavaServerlessPlatform / UserDO / XmlService / TcpUdpDeal / TaPromotion<br>
反例： javaserverlessplatform / UserDo / XMLService / TCPUDPDeal / TAPromotion<br>
【参考】 各层命名规约：<br>
A) Service/DAO 层方法命名规约</p>
<ol>
<li>获取单个对象的方法用 get 做前缀。</li>
<li>获取多个对象的方法用 list 做前缀，复数形式结尾如：listObjects。</li>
<li>获取统计值的方法用 count 做前缀。</li>
<li>插入的方法用 save/insert 做前缀。</li>
<li>删除的方法用 remove/delete 做前缀。</li>
<li>修改的方法用 update 做前缀。</li>
</ol>
</blockquote>
<h3 id="用到设计模式的类">用到设计模式的类</h3>
<blockquote>
<p>案例参考文章：<a href="/2025/06/19/java/java-design-patterns/">设计模式</a></p>
</blockquote>
<h4 id="概述-2">概述</h4>
<ul>
<li>抽象类名以Abstarct/Base为前缀</li>
<li>用到设计模式时要在命名中进行体现。</li>
</ul>
<blockquote>
<p>参考：<br>
【推荐】 如果模块、接口、类、方法使用了设计模式，在命名时需体现出具体模式。<br>
说明： 将设计模式体现在名字中，有利于阅读者快速理解架构设计理念。<br>
正例： public class OrderFactory;   public class LoginProxy;    public class ResourceObserver;</p>
</blockquote>
<h4 id="案例一：工厂设计模式采购披萨">案例一：工厂设计模式采购披萨</h4>
<p>采购披萨工厂类：利用工厂方法模式创建披萨时，可以把抽象工厂类命名为AbstractOrderPizzaFactory类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 抽象工厂类，订购披萨类：</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractOrderPizzaFactory</span>&#123;</span><br><span class="line"><span class="comment">// 构造方法不断根据用户输入披萨类型，调用创建披萨对象的抽象方法，实现加工披萨。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">OrderPizza</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Pizza</span> <span class="variable">pizza</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            pizza = createPizza(getType());</span><br><span class="line">            <span class="keyword">if</span> (pizza == <span class="literal">null</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Failed to Order Pizza&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                pizza.prepare();</span><br><span class="line">                pizza.bake();</span><br><span class="line">                pizza.cut();</span><br><span class="line">                pizza.box();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">while</span> (<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> Pizza <span class="title function_">createPizza</span><span class="params">(String orderType)</span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//具体工厂类，订购伦敦披萨类：</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LDOrderPizza</span> <span class="keyword">extends</span> <span class="title class_">AbstractOrderPizzaFactory</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Pizza <span class="title function_">createPizza</span><span class="params">(String orderType)</span> &#123;</span><br><span class="line">        <span class="type">Pizza</span> <span class="variable">pizza</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">switch</span> (orderType) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;cheese&quot;</span>: pizza = <span class="keyword">new</span> <span class="title class_">LDCheesePizza</span>(); <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;pepper&quot;</span>: pizza = <span class="keyword">new</span> <span class="title class_">LDPepperPizza</span>(); <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>: <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pizza;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="案例二：-观察者设计模式订阅天气">案例二： 观察者设计模式订阅天气</h4>
<p>天气局接口和观察者类：WeatherSubject和天气观察者接口WeatherObserver</p>
<h2 id="变量">变量</h2>
<h3 id="普通变量">普通变量</h3>
<ul>
<li>驼峰命名：例如商品价格命名pruductPrice，而不是pruduct_price。</li>
<li>禁止拼音英文混用；</li>
<li>禁止下划线、美元符号起始。</li>
<li>**可读性比长度重要：**命名尽可能短，但“望文生义”更重要
<ul>
<li><strong>可读性高（推荐）</strong>：下面这些类
<ul>
<li>最大值：maximumValue 缩写为 maxValue</li>
<li>项目数量：numberOfItems 缩写为 numItems</li>
<li>初始化计数器：initializeCounter 缩写为 initCounter</li>
</ul>
</li>
<li><strong>可读性低（不推荐）</strong>：
<ul>
<li>数量：count缩写为cnt</li>
<li>值：value缩写成val</li>
<li>序号：index缩写成i</li>
</ul>
</li>
</ul>
</li>
<li>**类型名词放词尾：**词尾是类型，让人能一眼看出这个变量是干什么的。例如：
<ul>
<li>开始时间：startTime而不是startedAt。</li>
<li>工作队列：workQueue而不是QueueOfWork。</li>
<li>名字列表：nameList而不是listName。因为它是个列表。</li>
<li>最大线程数：MAX_THREAD_COUNT而不是COUNT_MAX_THREAD 。它是数量而不是线程。</li>
</ul>
</li>
</ul>
<h3 id="数组"><strong>数组</strong></h3>
<p>中括号要直接跟在类型后面。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误示例：中括号放在变量名后面，注释放在右边</span></span><br><span class="line">String args[]; </span><br><span class="line"><span class="comment">// 正确示例：中括号直接跟在类型后面，注释放在代码上面</span></span><br><span class="line">String[] args; </span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>参考：</strong></p>
<p>【强制】 类型与中括号紧挨相连来表示数组。</p>
<p>正例： 定义整形数组 int[] arrayDemo;</p>
<p>反例： 在 main 参数中，使用 String args[]来定义</p>
</blockquote>
<h3 id="布尔型变量"><strong>布尔型变量</strong></h3>
<p>实体类（PO类）里布尔型变量不能加is前缀，否则部分框架解析会引起序列化错误。同时MySQL表达“是否”的字段可以用is_xxx，只需<code>&lt;resultMap&gt;</code>设置从 is_xxx 到 xxx 的映射关系即可。<strong>示例：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="comment">// 逻辑删除字段</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> deleted;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 其他属性、构造函数和方法</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isDeleted</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> deleted;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDeleted</span><span class="params">(<span class="type">boolean</span> deleted)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.deleted = deleted;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>为什么强制 boolean 类型变量不能使用 is 开头？</strong></p>
<p>为了防止序列号失败。</p>
<ul>
<li><strong>lombok序列号失败</strong>：javaBeans规范boolean变量的getter方法是isXXX()，其他变量的getter方法是getXXX()。lombok遵循javaBeans规范，如果一个变量是boolean isSuccess;在注解@Data或@Getter生成getter方法的时候，它会生成isSuccess()方法，而不是isIsSucess()方法。这也是lombok的一个大坑。</li>
<li><strong>rpc框架序列号失败</strong>：在一些rpc框架里面，当反向解析读取到isSuccess()方法的时候，rpc框架会“以为”其对应的属性值是success，而实际上其对应的属性值是isSuccess，导致属性值获取不到，从而抛出异常。</li>
</ul>
<p>参考：<br>
【强制】 POJO 类中布尔类型变量都不要加 is 前缀，否则部分框架解析会引起序列化错误。<br>
说明： 在 MySQL 规约中的建表约定第一条，表达是与否的值采用 is_xxx 的命名方式，所以，需要在<code>&lt;resultMap&gt;</code> 设置从 is_xxx 到 xxx 的映射关系。<br>
反例： 定义为基本数据类型 Boolean isDeleted 的属性，它的方法也是 isDeleted()，RPC 框架在反向解析的时候，“误以为”对应的属性名称是 deleted，导致属性获取不到，进而抛出异常。</p>
</blockquote>
<h3 id="父子类变量">父子类变量</h3>
<p>**父子类变量命名：**避免同名变量。例如父类有个name变量，子类想声明一个昵称变量，应另外声明nickname，而非再次声明name。</p>
<blockquote>
<p>参考：<br>
【强制】 避免在子父类的成员变量之间、或者不同代码块的局部变量之间采用完全相同的命名，使可读性降低。<br>
说明： 子类、父类成员变量名相同，即使是 public 类型的变量也是能够通过编译，而局部变量在同一方法内的不同代码块中同名也是合法的，但是要避免使用。对于非 setter/getter 的参数名称也要避免与成员变量名称相同。<br>
反例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfusingName</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="comment">// 非 setter/getter 的参数名称，不允许与本类成员变量同名</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getData</span><span class="params">(String alibaba)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">531</span>;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// 在同一方法体中，不允许与其它代码块中的 money 命名相同</span></span><br><span class="line">            <span class="keyword">final</span> <span class="type">int</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">615</span>;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_">ConfusingName</span> &#123;</span><br><span class="line">    <span class="comment">// 不允许与父类的成员变量名称相同</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> sonAge;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="局部变量">局部变量</h3>
<p>避免同一个方法的多个代码块中声明同名局部变量。例如下面方法的money变量不符合规范：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getData</span><span class="params">(String alibaba)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (condition) &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">531</span>;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="comment">// 在同一方法体中，不允许与其它代码块中的 money 命名相同</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> <span class="variable">money</span> <span class="operator">=</span> <span class="number">615</span>;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="常量">常量</h2>
<h3 id="普通常量">普通常量</h3>
<ul>
<li>
<p>**纯大写+下划线：**例如最大库存量MAX_STOCK_COUNT。</p>
</li>
<li>
<p>**可读性比长度重要：**常量命名全部大写，单词间用下划线隔开，力求语义表达完整清楚，不要嫌名字长。例如最大库存量MAX_STOCK_COUNT而不是MAX_COUNT。</p>
</li>
<li>
<p><strong>常量类细化</strong>：不要一个总的常量类维护所有常量，要按功能创建粒度小的常量类。例如电商平台商品模块不应该一个ProductStatusConstants维护所有商品常量，而应该细化成商品类型常量类ProductTypeConstants、商品价格范围常量类PriceRangeConstants、商品属性相关常量类ProductAttributeConstants等。</p>
</li>
<li>
<p><strong>枚举类</strong>：变量值只在固定几个值内变化时用枚举类。例如季节Season变量只会有春夏秋冬四种类型，可以定义成季节枚举类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">SeasonEnum</span> &#123;</span><br><span class="line">    SPRING(<span class="number">1</span>), SUMMER(<span class="number">2</span>), AUTUMN(<span class="number">3</span>), WINTER(<span class="number">4</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> seq;</span><br><span class="line">    </span><br><span class="line">    SeasonEnum(<span class="type">int</span> seq) &#123;</span><br><span class="line">        <span class="built_in">this</span>.seq = seq;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getSeq</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> seq;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p><strong>参考</strong>：<br>
【强制】 常量命名全部大写，单词间用下划线隔开，力求语义表达完整清楚，不要嫌名字长。<br>
正例： MAX_STOCK_COUNT / CACHE_EXPIRED_TIME<br>
反例： MAX_COUNT / EXPIRED_TIME<br>
【推荐】 不要使用一个常量类维护所有常量，要按常量功能进行归类，分开维护。<br>
说明： 大而全的常量类，杂乱无章，使用查找功能才能定位到修改的常量，不利于理解和维护。<br>
正例： 缓存相关常量放在类 CacheConsts 下；系统配置相关常量放在类 ConfigConsts 下。<br>
【推荐】 如果变量值仅在一个固定范围内变化用 enum 类型来定义。<br>
说明： 如果存在名称之外的延伸属性应使用 enum 类型，下面正例中的数字就是延伸信息，表示一年中的第几个季节。</p>
</blockquote>
<h3 id="Long常量">Long常量</h3>
<p>**大写L：**以便于区分“L”和数字“1”。例如Long a=1L，而不是Long a=1l。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 错误示例：</span></span><br><span class="line"><span class="comment">// a实际上表示 Long 型的 2，但容易混淆为数字 21。</span></span><br><span class="line"><span class="type">Long</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">2l</span>; </span><br><span class="line"><span class="comment">//正确示例：</span></span><br><span class="line"><span class="comment">// 使用大写 &quot;L&quot; 来明确表示 Long 型的 2。</span></span><br><span class="line"><span class="type">Long</span> <span class="variable">a</span> <span class="operator">=</span> <span class="number">2L</span>; </span><br><span class="line"><span class="comment">// 使用大写 &quot;L&quot; 来明确表示 long 型的 12345。</span></span><br><span class="line"><span class="type">long</span> <span class="variable">b</span> <span class="operator">=</span> <span class="number">12345L</span>; </span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>参考：</strong><br>
【强制】 在 long 或者 Long 赋值时，数值后使用大写的 L，不能是小写的 l，小写容易跟数字 1 混淆，造成误解。<br>
说明： Long a = 2l; 写的是数字的 21，还是 Long 型的 2。</p>
</blockquote>
<hr>
<h1>代码格式</h1>
<h2 id="编码和换行符">编码和换行符</h2>
<p>**规范：**代码的编码统一使用UTF-8，换行符使用 Unix 格式，不要使用 Windows 格式。</p>
<blockquote>
<p>换行符：</p>
<p><strong>Unix格式</strong>：在Unix、Linux以及类Unix操作系统中，使用换行符\n来表示新行，这是常用的行结束符。</p>
<p><strong>Windows格式</strong>：在Windows操作系统中，通常使用回车符和换行符\r\n（CR-LF，Carriage Return-Line Feed）来表示新行。</p>
<p><strong>IDEA编码设置UTF-8</strong>：File → Setting → Editor → File Coding → Global Encoding；Project Encoding；Default encoding for properties files → 都选择 UTF-8</p>
</blockquote>
<h2 id="空格规范">空格规范</h2>
<h3 id="保留字">保留字</h3>
<p>**规范：**if/for/while/switch/do 等保留字与括号之间都必须加空格。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">    <span class="comment">// 代码逻辑</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 循环体</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (condition) &#123;</span><br><span class="line">    <span class="comment">// 循环体</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">switch</span> (value) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="comment">// 情况1的代码</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="comment">// 默认情况的代码</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>Java常见保留字</strong>：</p>
<ol>
<li><strong>条件语句关键字</strong>：如if、else、switch、case、default。</li>
<li><strong>循环控制关键字</strong>：如for、while、do、break、continue。</li>
<li><strong>访问修饰符关键字</strong>：如public、private、protected。</li>
<li><strong>数据类型关键字</strong>：如int、double、char、boolean。</li>
<li><strong>类和对象关键字</strong>：如class、new、extends、implements。</li>
<li><strong>异常处理关键字</strong>：如try、catch、throw、throws、finally。</li>
</ol>
</blockquote>
<h3 id="二目、三目运算符">二目、三目运算符</h3>
<p>**规范：**任何二目、三目运算符的左右两边需要加一个空格。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> a + b;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">condition</span> <span class="operator">=</span> (x &gt; y) ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>java中常见的二目、三目运算符：</strong></p>
<ul>
<li><strong>二目运算符：</strong>+、-、*、/、%、=、==、&gt;=、&amp;&amp;</li>
<li><strong>三目运算符：</strong>?:</li>
</ul>
</blockquote>
<h3 id="缩进">缩进</h3>
<p>**规范：**采用 4 个空格缩进。可以使用tab快捷键直接四个空格，禁止直接使用“tab”字符 。</p>
<p>IDEA 设置 tab 为 4 个空格时，请勿勾选 Use tab character；而在 eclipse 中，必须勾选 insert spaces for tabs。</p>
<blockquote>
<p><strong>IDEA设置 tab</strong>：File → Setting → Editor → Code Style → Tabs and Indents → 取消勾选Use tab character → Indent 设置4</p>
</blockquote>
<h3 id="注释">注释</h3>
<p>**规范：**注释双斜线后紧跟一个空格。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正例： 这是示例注释，请注意在双斜线之后有一个空格</span></span><br><span class="line"><span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>();</span><br><span class="line"><span class="comment">//反例： 这是示例注释，请注意在双斜线之后没空格</span></span><br><span class="line"><span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>();</span><br></pre></td></tr></table></figure>
<h3 id="强制转换">强制转换</h3>
<p>**规范：**强制转换时，右括号后无空格。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正例：</span></span><br><span class="line"><span class="type">long</span> <span class="variable">first</span> <span class="operator">=</span> <span class="number">1000000000000L</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">second</span> <span class="operator">=</span> (<span class="type">int</span>)first + <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 反例：</span></span><br><span class="line"><span class="type">long</span> <span class="variable">first</span> <span class="operator">=</span> <span class="number">1000000000000L</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">second</span> <span class="operator">=</span> (<span class="type">int</span>) first + <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<h3 id="方法参数">方法参数</h3>
<p>**规范：**方法参数逗号后加一个空格。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正例：下例中实参的 args1，后边必须要有一个空格。</span></span><br><span class="line">method(args1, args2, args3);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 反例：下例中实参的 args1，后边没空格。</span></span><br><span class="line">method(args1,args2,args3);</span><br><span class="line">method(args1 ,args2 ,args3);</span><br></pre></td></tr></table></figure>
<h2 id="行数、字符数">行数、字符数</h2>
<h3 id="单行字符数">单行字符数</h3>
<p>**规范：**单行字符数不超过120个，超过时需要换行。</p>
<p><strong>换行规则：</strong></p>
<ol>
<li>
<p>第2/3/4/…行相对第一行缩进 4 个空格。</p>
</li>
<li>
<p>运算符随下文一起换行。例如a + b，应该换行成a\n + b，而不是a + \nb</p>
</li>
<li>
<p>点符号与下文一起换行。例如dog.eat()，应该换行成dog\n.eat()，而不是dog.\neat()</p>
</li>
<li>
<p>方法的多个参数换行时，逗号不与下文一起换行。例如sum (1,2,3)，应该换行成sum (1,2,\n3)，而不是sum (1,2\n,3)</p>
</li>
<li>
<p>在括号前不换行。例如fun (a)，应该换行成\nfun (a)，而不是fun \n(a)</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正例：</span></span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(); </span><br><span class="line"><span class="comment">// 超过 120 个字符的情况下，换行缩进 4 个空格，点号和方法名称一起换行</span></span><br><span class="line">sb.append(<span class="string">&quot;Jack&quot;</span>).append(<span class="string">&quot;Ma&quot;</span>)... </span><br><span class="line">.append(<span class="string">&quot;alibaba&quot;</span>)... </span><br><span class="line">.append(<span class="string">&quot;alibaba&quot;</span>)... </span><br><span class="line">.append(<span class="string">&quot;alibaba&quot;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 反例：</span></span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(); </span><br><span class="line"><span class="comment">// 超过 120 个字符的情况下，不要在括号前换行</span></span><br><span class="line">sb.append(<span class="string">&quot;Jack&quot;</span>).append(<span class="string">&quot;Ma&quot;</span>)...append </span><br><span class="line">(<span class="string">&quot;alibaba&quot;</span>); </span><br><span class="line"><span class="comment">// 参数很多的方法调用可能超过 120 个字符，不要在逗号前换行</span></span><br><span class="line">method(args1, args2, args3, ... </span><br><span class="line">, argsX);</span><br></pre></td></tr></table></figure>
<h3 id="方法行数">方法行数</h3>
<p>**规范：**单个方法的总行数不超过 80 行。</p>
<p>除注释之外的方法签名、左右大括号、方法内代码、空行、回车及任何不可见字符的总行数不超过80 行。</p>
<h2 id="括号">括号</h2>
<h3 id="大括号换行规则">大括号换行规则</h3>
<p>**规范：**大括号内为空时无需换行。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正例</span></span><br><span class="line"><span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="comment">// 大括号内为空，则不换行</span></span><br><span class="line"><span class="keyword">if</span> (number &gt; <span class="number">0</span>) &#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// 反例</span></span><br><span class="line"><span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span> (number &gt; <span class="number">0</span>) </span><br><span class="line">&#123;</span><br><span class="line"> </span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>**规范：**大括号内非空时：</p>
<ul>
<li>**左大括号：**前不换行，后换行</li>
<li>**右大括号：**前换行，右换行（有else时不换行）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正例</span></span><br><span class="line"><span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="keyword">if</span> (number &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;这个数字是正数&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span>(number &lt; -<span class="number">3</span>)&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;这个数字不是正数&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span>&#123;&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;...&quot;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="小括号规则">小括号规则</h3>
<p>**规范：**小括号内侧不隔空格，外侧隔单空格。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正例：小括号内侧不隔空格，外侧隔单空格。</span></span><br><span class="line"><span class="keyword">if</span> (a == b)</span><br><span class="line">    </span><br><span class="line"><span class="comment">// 反例：</span></span><br><span class="line"><span class="comment">// 小括号外侧没隔单空格。</span></span><br><span class="line"><span class="keyword">if</span>(a == b)</span><br><span class="line"><span class="comment">// 小括号内侧隔了空格</span></span><br><span class="line"><span class="keyword">if</span> ( a == b )</span><br></pre></td></tr></table></figure>
<hr>
<h1>MySQL 规约</h1>
<h2 id="建表规约">建表规约</h2>
<h3 id="库">库</h3>
<p>**命名：**库名与应用名称尽量一致；</p>
<h3 id="表">表</h3>
<ul>
<li>**大小写：**MySQL表名不能有大写字母。因为MySQL 在 Windows 下不区分大小写，但在 Linux 下默认是区分大小写。</li>
<li>**复数：**不可使用复数。</li>
<li>**不可使用保留字：**例如不能命名为add,from,set等。</li>
<li>**业务名称_表的作用：**建议命名“业务名称_表的作用”，例如：
<ul>
<li><strong>用户信息表</strong>：user_info</li>
<li><strong>产品信息表</strong>：product_info</li>
<li><strong>客户订单关联表</strong>：customer_order_relation</li>
</ul>
</li>
</ul>
<h3 id="字段">字段</h3>
<h4 id="基础命名规范">基础命名规范</h4>
<ul>
<li>**命名要慎重：**字段名的修改代价很大，所以必须要慎重；</li>
<li>**大小写：**MySQL字段名不能有大写字母。因为MySQL 在 Windows 下不区分大小写，但在 Linux 下默认是区分大小写，大小写混用会出问题。</li>
<li>**保留字：**不可使用保留字。例如不能命名为add,from,set等。</li>
</ul>
<h4 id="基本规范">基本规范</h4>
<ul>
<li>**注释：**字段含义改变时，及时更新注释；</li>
<li>**合理冗余：**多读少写、长度短、非唯一索引的字段可以冗余，以降低连表查询的次数。</li>
<li>**关联字段类型：**要关联查询的两个字段，数据类型必须一致。如果不一致会导致索引失效，索引和索引失效场景具体可以参考顶部导航文章中的“MySQL高级篇”；</li>
<li><strong>分库分表依据：<strong>单表数据量</strong>五百万条</strong>数据，或者容量<strong>2GB</strong>。</li>
<li>**三大必备字段：**主键、创建时间、修改时间。即id, create_time（或者命名为gmt_create）, update_time（或者命名为gmt_modified）</li>
</ul>
<h3 id="布尔型字段">布尔型字段</h3>
<ul>
<li>
<p>**结构：**is_xxx</p>
</li>
<li>
<p>**数据类型：**unsigned tinyint</p>
</li>
<li>
<p>**值：**1 表示是，0 表示否</p>
</li>
<li>
<p><strong>对应实体类变量：<strong>虽然数据库必须命名成is_xxx，但是该表对应的实体类成员变量</strong>不能命名为isXxx</strong>，否则会导致序列号失败。故需要在 <code>resultMap</code> 中进行字段与属性之间的映射。</p>
</li>
</ul>
<blockquote>
<p><strong>《阿里规约》原文</strong>：<br>
【强制】 表达是与否概念的字段，必须使用 is_xxx 的方式命名，数据类型是 unsigned tinyint （1 表示是，0 表示否）。<br>
说明： 任何字段如果为非负数，必须是 unsigned 。<br>
<strong>注意</strong>： POJO 类中的任何布尔类型的变量，都不要加 is 前缀，所以，需要在&lt; resultMap &gt;设置从 is_xxx到 Xxx 的映射关系。数据库表示是与否的值，使用 tinyint 类型，坚持 is_xxx 的命名方式是为了明确其取值含义与取值范围。<br>
正例： 表达逻辑删除的字段名 is_deleted ，1 表示删除，0 表示未删除。</p>
</blockquote>
<h3 id="小数">小数</h3>
<ul>
<li>**类型：**decimal。主要是为了防止丢失精度。</li>
</ul>
<blockquote>
<p>【强制】 小数类型为 decimal ，禁止使用 float 和 double 。<br>
说明： 在存储的时候，float 和 double 都存在精度损失的问题，很可能在比较值的时候，得到不正确的结果。如果存储的数据范围超过 decimal 的范围，建议将数据拆成整数和小数并分开存储。</p>
</blockquote>
<h3 id="字符串">字符串</h3>
<h4 id="基本规范-2">基本规范</h4>
<ul>
<li>**长度几乎固定字段：**使用char类型。例如电话号、身份证字段类型char(11)即可，效率要比varchar(11)更高。因为实际存储时，varchar会根据实际输入的内容占用的长度进行存储，因此占用的存储空间是实际内容长度+可变长字段长度（当varchar使用长度≤255时使用一个字节记录，长度超出255时使用二个字节记录）。</li>
<li>**超长字段：**长度超过 5000的超长字段，一律使用text类型，并将该字段独立出一个表。因为text、blog类型会导致索引失效；不使用varchar是因为varchar(5000)太长，建索引后非聚簇索引树过于占用磁盘空间。</li>
</ul>
<blockquote>
<p>【强制】 如果存储的字符串长度几乎相等，使用 char 定长字符串类型。<br>
【强制】 varchar 是可变长字符串，不预先分配存储空间，长度不要超过 5000，如果存储长度大于此值，定义字段类型为 text ，独立出来一张表，用主键来对应，避免影响其它字段索引效率。</p>
</blockquote>
<h4 id="varchar和char类型的区别、适用场景">varchar和char类型的区别、适用场景</h4>
<p><strong>长度：</strong></p>
<ul>
<li>**char：**固定长度的字符串</li>
<li>**varchar：**可变长度的字符串。</li>
</ul>
<p><strong>存储方式：</strong></p>
<ul>
<li><strong>char：<strong>长度固定不可变，未存满的值会用空格填充到固定的长度。因此char类型字符串</strong>末尾无法存储空格</strong>，当然也不需要额外字节记录字符串长度。</li>
<li><strong>varchar：<strong>varchar会使用1或2个额外字节记录字符串的长度。当列最大长度是255及以下时，varchar会使用一个字节</strong>记录可变长长度</strong>，最大长度255以上会使用两个字节记录可变长长度。因为varchar有记录长度，所以字符串末尾可以存储空格。</li>
</ul>
<p><strong>存储容量：</strong></p>
<ul>
<li>**char：**最多255个字符</li>
<li>**varchar：**理论上最多65535字节，最多65532个字符（当用utf-8编码存纯英文、且该表只有这一个字段时，字符串中的字符只占1个字节，能达到65532个字符）。但实际从性能考虑，超过5000长度时就不允许再用varchar，而是使用text类型。</li>
</ul>
<blockquote>
<p><strong>各编码的占用长度</strong></p>
<ul>
<li>GBK编码：一个英文字符占一个字节，中文2字节，单字符最大可占用2个字节。</li>
<li>UTF-8编码：一个英文字符占一个字节，中文3字节，单字符最大可占用3个字节。</li>
<li>utf8mb4编码：一个英文字符占一个字节，中文3字节，单字符最大占4个字节（如emoji表情4字节）。</li>
</ul>
<p><strong>varchar(20) 是指字符串最大字节数是20，还是最大字符数是20</strong>？</p>
<p><strong>答案</strong>：取决于MySQL版本；4.0版本及以下，MySQL中varchar长度是按字节展示，如varchar(20)，指的是20字节；5.0版本及以上，MySQL中varchar长度是按字符展示。如varchar(20)，指的是20字符。</p>
<p><strong>为什么varchar理论上最多字符数是65532</strong>？</p>
<p>**答案：**因为MySQL行默认最大65535字节，varchar还需要1或2个字节维护可变长度，1个字节标识该列是否为NULL。</p>
</blockquote>
<p><strong>性能和空间</strong>：</p>
<ul>
<li><strong>char</strong>：性能更好，每次更新时不用维护长度；但存在空间浪费的可能；</li>
<li><strong>varchar</strong>：性能相对差一点，因为每次更新时要维护长度。如果更新后字符串变长后，原来的数据页正好存满，则需要耗费时间处理新字符串的存储；处理方式取决于存储引擎，例如MylSAM将行拆成多个片段存储，innoDB会分裂页。</li>
</ul>
<p><strong>适用场景：</strong></p>
<ul>
<li>**char：**存储长度几乎固定的字符串适用char类型。例如电话号、身份证字段类型char(11)即可，效率要比varchar(11)更高。因为实际存储时，varchar会根据实际输入的内容占用的长度进行存储，因此占用的存储空间是实际内容长度+可变长字段长度（当varchar使用长度≤255时使用一个字节记录，长度超出255时使用二个字节记录）。</li>
<li>**varchar：**长度几乎不固定、不超过2000字符的字符串。</li>
</ul>
<h4 id="varchar和text类型的区别、适用场景">varchar和text类型的区别、适用场景</h4>
<p><strong>存储方式</strong>：</p>
<ul>
<li><strong>VARCHAR</strong>：可变长度的字符数据类型，它需要指定最大长度。实际存储时，会根据实际输入的内容占用的长度进行存储，因此占用的存储空间是实际内容长度加上一些额外的长度信息。</li>
<li><strong>TEXT</strong>：TEXT也用于存储可变长度的字符数据，但它可以存储非常大的文本内容，通常可以存储几GB的数据。</li>
</ul>
<p><strong>索引和查询</strong>：</p>
<ul>
<li><strong>VARCHAR</strong>：由于VARCHAR有固定的最大长度，可以建立更有效率的索引，同时在查询时会更快一些。</li>
<li><strong>TEXT</strong>：对于较大的文本数据，使用TEXT类型可能会导致一些查询性能上的损失，因为文本数据的处理通常会比较耗费资源。</li>
</ul>
<p><strong>使用场景</strong>：</p>
<ul>
<li><strong>VARCHAR</strong>：适用于长度可预期且不会太长的文本内容，比如姓名、地址等信息。</li>
<li><strong>TEXT</strong>：适用于长度不确定或者非常长的文本内容，比如文章内容、评论等。</li>
</ul>
<p><strong>优缺点</strong>：</p>
<ul>
<li><strong>VARCHAR</strong>：占用存储空间相对较小，适合存储较短字符串，支持索引，查询速度较快。但最大长度的限制可能会带来一些不便。</li>
<li><strong>TEXT</strong>：可以存储非常大的文本内容，并且没有固定长度的限制，适合存储较长的文本数据。但是在查询和索引上可能会稍慢，而且在某些情况下，可能会消耗更多的存储空间。</li>
</ul>
<h3 id="外键-级联">外键/级联</h3>
<p>**禁用外键和级联。**因为外键影响数据库的插入速度，每次插入时都要检查、更新外键；级联更新是强阻塞，也会影响性能。<strong>外键与级联更新适用于单机低并发</strong>的场景，不适合分布式、高并发集群的场景</p>
<ul>
<li>
<p>**级联删除：**创建外键时声明级联，则引用表删除数据时，被引用表也会级联删除这条数据。示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FOREIGN</span> KEY (customer_id) <span class="keyword">REFERENCES</span> customers(customer_id) <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCAD</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>**级联更新：**创建外键时声明级联，则引用表更新数据时，被引用表也会级联更新这条数据。示例</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FOREIGN</span> KEY (customer_id) <span class="keyword">REFERENCES</span> customers(customer_id) <span class="keyword">ON</span> <span class="keyword">UPDATE</span> CASCAD</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="索引">索引</h2>
<h3 id="命名规范">命名规范</h3>
<blockquote>
<p>【强制】 主键索引名为 pk_ 字段名；唯一索引名为 uk _字段名 ； 普通索引名则为 idx _字段名。</p>
<p>说明： pk_ 即 primary key；uk_ 即 unique key；idx_ 即 index 的简称。</p>
</blockquote>
<h3 id="创建规范">创建规范</h3>
<ul>
<li>
<p>**唯一索引：**唯一特性字段必须创建唯一索引。一般不需要另外创建，因为创建唯一约束的时候会自动创建唯一索引。</p>
</li>
<li>
<p>**关联查询：**被驱动表优先建索引，超过三个表禁止 join。</p>
</li>
<li>
<p><strong>字符串：</strong></p>
<ul>
<li>**模糊查询：**禁止左模糊、全模糊索引。因为模糊查询会使索引失效，解决方案是使用ES等搜索引擎实现页面的搜索。</li>
<li>**索引长度：**必须使用前缀索引。即字符串创建索引时必须指定索引长度，具体索引长度应该在区分度较高的前提下，索引长度越短越好。区分度=count(distinct left(列名, 索引长度))/count(*)，即统计重复次数。</li>
</ul>
</li>
<li>
<p>**排序：**保持联合索引的有序性。例如搜索条件where a=? and b=? order by c;，则创建联合索引：a_b_c</p>
</li>
<li>
<p>**联合索引：**区分度高的字段放左边。</p>
</li>
<li>
<p>**覆盖索引：**使用覆盖索引防止回表；例如查询where a=? and b=? and c=?，则创建联合索引a_b_c，而不是a_b，因为走a_b_c的时候，直接在非聚簇索引树就能获取到所有要查询的字段，不需要回表查聚簇索引树。</p>
</li>
<li>
<p>**子查询优化深分页：**正常情况下，深分页查询性能是很差的，例如我需要1w页第一条数据，那么就需要查出前1w条数据，性能很慢。用子查询可以优化深分页。</p>
</li>
<li>
<p>**深分页查询优化：**需求是返回第1000000~1000010 的记录。如果直接limit 100000,10，将会先排序前十万条数据并回表，查询速度会非常慢，甚至会超时。</p>
<ul>
<li>
<p>**主键有序的表根据主键排序，先过滤再排序：**直接查上页最后记录之后的几个数据。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 自增。适用于app端和web端。由于不建议用自增策略（不安全、<span class="number">8.0</span>才修复的ID回溯问题），所以此方法适用性不广。</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="operator">&gt;</span> <span class="number">99999</span> LIMIT <span class="number">10</span>;</span><br><span class="line"># 雪花。x是上页最后一条记录的id。只适用于app端上下滑动分页时候必能拿到上页记录id。</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id <span class="operator">&gt;</span> #&#123;x.id&#125; LIMIT <span class="number">10</span>;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>**主键不有序的表根据主键排序，先给主键分页，然后内连接原表：**当前表内连接排序截取后的主键表，连接字段是主键。因为查主键是在聚簇索引树查，不用回表，排序和分页很快</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student t,(<span class="keyword">SELECT</span> id <span class="keyword">FROM</span> student <span class="keyword">ORDER</span> <span class="keyword">BY</span> id LIMIT <span class="number">1000000</span>,<span class="number">10</span>) a <span class="keyword">WHERE</span> t.id <span class="operator">=</span> a.id;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>**主键有序的表根据非主键排序：**得到上一页最后一条记录x（app端通过下拉翻页是肯定能获得上页最后记录的），那么目标页码的所有记录id都比x.id小（因为逆序，且排序依据其实是age,id，主键自增），目标页码的所有记录age都比x.age小或等于。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 自增</span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> id<span class="operator">&lt;</span>#&#123;x.id&#125; <span class="keyword">AND</span> age<span class="operator">&gt;=</span>#&#123;x.age&#125; <span class="keyword">ORDER</span> <span class="keyword">BY</span> age <span class="keyword">DESC</span> LIMIT <span class="number">10</span>;</span><br><span class="line"># 雪花一个思路，只是x.id通过子查询获取</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>**命中索引的要求：**SQL 性能优化目标至少达 range 级别（范围索引），要求是 ref 级别（非唯一索引），最好const（唯一索引）。</p>
</li>
</ul>
<h2 id="SQL语句">SQL语句</h2>
<h3 id="基本规范-3">基本规范</h3>
<ul>
<li>**更新前要先查询：**删除、更新前要先查询，避免误操作。</li>
<li>禁用存储过程；</li>
<li>禁用外键、级联。</li>
</ul>
<h3 id="查询字段">查询字段</h3>
<ul>
<li>
<p>**禁用select *。**原因：</p>
<ul>
<li>
<p>**性能：**多查询一些不需要的字段，性能差；</p>
</li>
<li>
<p>**失去覆盖索引的可能性：**在命中联合索引时，查询的字段正好在非聚簇索引树中，就不需要回表了，而如果select *，则一定需要回表，影响性能。</p>
</li>
<li>
<p>**对比select 全部字段：**即使需求是查询全部字段，也尽量用select 全部字段，而不用select *。原因：</p>
<ul>
<li>
<p>**性能：**select * 在系统解析的时候会多一步从系统表获取具体字段的步骤，因此会比select 全部字段多花时间，效率稍低。</p>
</li>
<li>
<p>**结果顺序：**select 全部字段，查询的结果字段顺序可控；</p>
</li>
</ul>
</li>
<li>
<p>**应用场景：**某些特例也是可以用select *的，例如一些特定场景，在开发过程中（非生产环境），表结构、字段名频繁变化，可以暂时用select *</p>
</li>
</ul>
</li>
<li>
<p>**查询数量：**正确区分count(*)、count(1)、count(字段)</p>
<ul>
<li>**count(*)：**统计包括null的所有行数</li>
</ul>
</li>
<li>
<p>**count(1)：**统计包括null的第一列的行数。因为第一列在每一列都存在，所以等同于统计了所有行，并且不需要检查各行数据， 所以性能可能略高于count(*)</p>
<ul>
<li>**count(字段)：**统计不包括null的字段列的行数。例如学生表有100行，name列全是null，select count(name) from student查出的结果是0.</li>
</ul>
</li>
<li>
<p>**求和：**当某一列值全是null时，count(col)的值是0，sum(col)的值是null，所以求和时要防止空指针异常。</p>
</li>
</ul>
<h3 id="分页查询">分页查询</h3>
<p>**先查数量再查询：**分页查询前先查询count，如果count为0，则直接返回数据为null，不再分页查询，提高效率。</p>
<hr>
<h2 id="对象关系映射（ORM）">对象关系映射（ORM）</h2>
<ul>
<li>
<p><strong>禁用select *。</strong></p>
</li>
<li>
<p>**布尔型字段：**数据库表用is_xxx，实体类禁用isXxx</p>
<ul>
<li>
<p>**结构：**is_xxx</p>
</li>
<li>
<p>**数据类型：**unsigned tinyint</p>
</li>
<li>
<p>**值：**1 表示是，0 表示否</p>
</li>
<li>
<p><strong>对应实体类变量：<strong>虽然数据库必须命名成is_xxx，但是该表对应的实体类成员变量</strong>不能命名为isXxx</strong>，否则会导致序列号失败。所系需要在 resultMap 中进行字段与属性之间的映射。</p>
</li>
</ul>
</li>
<li>
<p>**参数：**使用#{}，#param#，而不是${}。防止SQL注入。</p>
</li>
<li>
<p>**返回值：**强制禁用Map，虽然少去了序列号的过程，性能会快一点，但是字段类型不可控。</p>
</li>
<li>
<p>**更新接口：**更新时不要更新全部字段，尽量不要写一个参数为实体类的更新接口。一方面可以防止出错、另一方面可以提高性能、减少binlog存储（binlog是二进制日志文件，记录改不记录读，用于数据复制和数据恢复；在主从同步时用到）。</p>
</li>
<li>
<p>**不要滥用事务：**事务要尽可能的控制粒度，使粒度尽可能的小，例如一些不必要的查询可以放在事务外部，以减少锁冲突、缩短连接时长，从而提高QPS（每秒发送的请求数）</p>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://southernfish.github.io">Southern Fish</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://southernfish.github.io/2025/07/27/java/java-coding-guidelines/">https://southernfish.github.io/2025/07/27/java/java-coding-guidelines/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://southernfish.github.io" target="_blank">Southern Fish</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/system/">system</a></div><div class="post_share"><div class="social-share" data-image="/img/article/article6.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2025/07/26/database/db-mysql-5-sharding/"><img class="next-cover" src="/img/article/article5.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">MySQL数据库-表设计优化、读写分离与分库分表</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2025/07/01/server/distributed-architecture/" title="分布式架构"><img class="cover" src="/img/article/article5.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-07-01</div><div class="title">分布式架构</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Southern Fish</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">71</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">29</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">15</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/SouthernFish" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/1002721576@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">天下事岂能尽如吾意，心境须恰适，尽其在我，随遇而安。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">命名规范</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%85%E5%90%8D"><span class="toc-number">1.1.</span> <span class="toc-text">包名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E5%90%8D"><span class="toc-number">1.2.</span> <span class="toc-text">类名</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E7%B1%BB%E5%92%8C%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.1.</span> <span class="toc-text">普通类和方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E7%B1%BB"><span class="toc-number">1.2.2.</span> <span class="toc-text">测试类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E7%B1%BB"><span class="toc-number">1.2.3.</span> <span class="toc-text">抽象类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E7%B1%BB"><span class="toc-number">1.2.4.</span> <span class="toc-text">异常类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB"><span class="toc-number">1.2.5.</span> <span class="toc-text">枚举类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E5%92%8C%E5%AE%9E%E7%8E%B0%E7%B1%BB"><span class="toc-number">1.2.6.</span> <span class="toc-text">接口和实现类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PO%E3%80%81DTO%E3%80%81VO"><span class="toc-number">1.2.7.</span> <span class="toc-text">PO、DTO、VO</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E5%88%B0%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E7%9A%84%E7%B1%BB"><span class="toc-number">1.2.8.</span> <span class="toc-text">用到设计模式的类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0-2"><span class="toc-number">1.2.8.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E4%B8%80%EF%BC%9A%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E9%87%87%E8%B4%AD%E6%8A%AB%E8%90%A8"><span class="toc-number">1.2.8.2.</span> <span class="toc-text">案例一：工厂设计模式采购披萨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E4%BA%8C%EF%BC%9A-%E8%A7%82%E5%AF%9F%E8%80%85%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AE%A2%E9%98%85%E5%A4%A9%E6%B0%94"><span class="toc-number">1.2.8.3.</span> <span class="toc-text">案例二： 观察者设计模式订阅天气</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">1.3.</span> <span class="toc-text">变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E5%8F%98%E9%87%8F"><span class="toc-number">1.3.1.</span> <span class="toc-text">普通变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-number">1.3.2.</span> <span class="toc-text">数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E5%9E%8B%E5%8F%98%E9%87%8F"><span class="toc-number">1.3.3.</span> <span class="toc-text">布尔型变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E5%AD%90%E7%B1%BB%E5%8F%98%E9%87%8F"><span class="toc-number">1.3.4.</span> <span class="toc-text">父子类变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-number">1.3.5.</span> <span class="toc-text">局部变量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E9%87%8F"><span class="toc-number">1.4.</span> <span class="toc-text">常量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E5%B8%B8%E9%87%8F"><span class="toc-number">1.4.1.</span> <span class="toc-text">普通常量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Long%E5%B8%B8%E9%87%8F"><span class="toc-number">1.4.2.</span> <span class="toc-text">Long常量</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">代码格式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E5%92%8C%E6%8D%A2%E8%A1%8C%E7%AC%A6"><span class="toc-number">2.1.</span> <span class="toc-text">编码和换行符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A9%BA%E6%A0%BC%E8%A7%84%E8%8C%83"><span class="toc-number">2.2.</span> <span class="toc-text">空格规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%9D%E7%95%99%E5%AD%97"><span class="toc-number">2.2.1.</span> <span class="toc-text">保留字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E7%9B%AE%E3%80%81%E4%B8%89%E7%9B%AE%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">2.2.2.</span> <span class="toc-text">二目、三目运算符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%A9%E8%BF%9B"><span class="toc-number">2.2.3.</span> <span class="toc-text">缩进</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E9%87%8A"><span class="toc-number">2.2.4.</span> <span class="toc-text">注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2"><span class="toc-number">2.2.5.</span> <span class="toc-text">强制转换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0"><span class="toc-number">2.2.6.</span> <span class="toc-text">方法参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%8C%E6%95%B0%E3%80%81%E5%AD%97%E7%AC%A6%E6%95%B0"><span class="toc-number">2.3.</span> <span class="toc-text">行数、字符数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E8%A1%8C%E5%AD%97%E7%AC%A6%E6%95%B0"><span class="toc-number">2.3.1.</span> <span class="toc-text">单行字符数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E8%A1%8C%E6%95%B0"><span class="toc-number">2.3.2.</span> <span class="toc-text">方法行数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%AC%E5%8F%B7"><span class="toc-number">2.4.</span> <span class="toc-text">括号</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%A7%E6%8B%AC%E5%8F%B7%E6%8D%A2%E8%A1%8C%E8%A7%84%E5%88%99"><span class="toc-number">2.4.1.</span> <span class="toc-text">大括号换行规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E6%8B%AC%E5%8F%B7%E8%A7%84%E5%88%99"><span class="toc-number">2.4.2.</span> <span class="toc-text">小括号规则</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">MySQL 规约</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E8%A1%A8%E8%A7%84%E7%BA%A6"><span class="toc-number">3.1.</span> <span class="toc-text">建表规约</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%93"><span class="toc-number">3.1.1.</span> <span class="toc-text">库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8"><span class="toc-number">3.1.2.</span> <span class="toc-text">表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5"><span class="toc-number">3.1.3.</span> <span class="toc-text">字段</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83"><span class="toc-number">3.1.3.1.</span> <span class="toc-text">基础命名规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%A7%84%E8%8C%83"><span class="toc-number">3.1.3.2.</span> <span class="toc-text">基本规范</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E5%9E%8B%E5%AD%97%E6%AE%B5"><span class="toc-number">3.1.4.</span> <span class="toc-text">布尔型字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E6%95%B0"><span class="toc-number">3.1.5.</span> <span class="toc-text">小数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">3.1.6.</span> <span class="toc-text">字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%A7%84%E8%8C%83-2"><span class="toc-number">3.1.6.1.</span> <span class="toc-text">基本规范</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#varchar%E5%92%8Cchar%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8C%BA%E5%88%AB%E3%80%81%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">3.1.6.2.</span> <span class="toc-text">varchar和char类型的区别、适用场景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#varchar%E5%92%8Ctext%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%8C%BA%E5%88%AB%E3%80%81%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">3.1.6.3.</span> <span class="toc-text">varchar和text类型的区别、适用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E9%94%AE-%E7%BA%A7%E8%81%94"><span class="toc-number">3.1.7.</span> <span class="toc-text">外键&#x2F;级联</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">3.2.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83"><span class="toc-number">3.2.1.</span> <span class="toc-text">命名规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%84%E8%8C%83"><span class="toc-number">3.2.2.</span> <span class="toc-text">创建规范</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.3.</span> <span class="toc-text">SQL语句</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%A7%84%E8%8C%83-3"><span class="toc-number">3.3.1.</span> <span class="toc-text">基本规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%AD%97%E6%AE%B5"><span class="toc-number">3.3.2.</span> <span class="toc-text">查询字段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.3.3.</span> <span class="toc-text">分页查询</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84%EF%BC%88ORM%EF%BC%89"><span class="toc-number">3.4.</span> <span class="toc-text">对象关系映射（ORM）</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/07/27/java/java-coding-guidelines/" title="阿里规约"><img src="/img/article/article6.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="阿里规约"/></a><div class="content"><a class="title" href="/2025/07/27/java/java-coding-guidelines/" title="阿里规约">阿里规约</a><time datetime="2025-07-27T06:26:36.000Z" title="发表于 2025-07-27 14:26:36">2025-07-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/26/database/db-mysql-5-sharding/" title="MySQL数据库-表设计优化、读写分离与分库分表"><img src="/img/article/article5.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL数据库-表设计优化、读写分离与分库分表"/></a><div class="content"><a class="title" href="/2025/07/26/database/db-mysql-5-sharding/" title="MySQL数据库-表设计优化、读写分离与分库分表">MySQL数据库-表设计优化、读写分离与分库分表</a><time datetime="2025-07-26T11:30:36.000Z" title="发表于 2025-07-26 19:30:36">2025-07-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/26/database/db-mysql-6-query/" title="MySQL数据库-查询优化"><img src="/img/article/article3.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL数据库-查询优化"/></a><div class="content"><a class="title" href="/2025/07/26/database/db-mysql-6-query/" title="MySQL数据库-查询优化">MySQL数据库-查询优化</a><time datetime="2025-07-26T07:30:36.000Z" title="发表于 2025-07-26 15:30:36">2025-07-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/26/database/db-mysql-4-optimize/" title="MySQL数据库-优化"><img src="/img/article/article1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MySQL数据库-优化"/></a><div class="content"><a class="title" href="/2025/07/26/database/db-mysql-4-optimize/" title="MySQL数据库-优化">MySQL数据库-优化</a><time datetime="2025-07-26T05:30:36.000Z" title="发表于 2025-07-26 13:30:36">2025-07-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/07/26/database/db-redis/" title="Redis"><img src="/img/article/article1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis"/></a><div class="content"><a class="title" href="/2025/07/26/database/db-redis/" title="Redis">Redis</a><time datetime="2025-07-26T02:15:36.000Z" title="发表于 2025-07-26 10:15:36">2025-07-26</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/article/article6.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Southern Fish</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>